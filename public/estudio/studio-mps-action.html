<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”robots” content=”noindex,nofollow”>
    <meta http-equiv ='content-language' content ='zh-cn'>

    <link rel="icon" href="https://www.bluvarri.com/favicon.png">
    <title>合约工作空间 - E-Studio</title>
    <script src="/common/javascripts/avif-webp.min.js"></script>


    <link rel="stylesheet" href="/estudio/stylesheets/studio.scss">
    <link rel="stylesheet" href="/common/stylesheets/millstone-chat-compoent.scss">
    <link rel="stylesheet" href="/estudio/stylesheets/studio-mps-action.scss">




</head>
<body>
  <pt-app id="app" v-cloak>
      <!-- header nav -->
      <header class="text-white">
        <div class="d-flex justify-content-between align-items-center hdlayout">
  
          <div class="d-flex">
            <div class="toggle-nav">
              <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
                </svg>
              </button>
            </div>
            <a href="/estudio/studio-store">
              <div class="d-flex align-items-center logo">
                <img src="/common/icon/logo_blv-final-white.png" alt="logo">
                <h2 class="mb-0 ms-2">E-Studio</h2>
              </div>
            </a>
  
          </div>
          
          <div>
            
            <div class="btn-group" style="margin-right: 8px;" >
            
              <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false" >
                <div class="tooltip-nav" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-title="传送">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7623 3.25011C12.2215 3.25576 12.752 3.47285 13.0382 3.98431L13.2124 4.29565C15.8706 9.04584 18.0375 13.9835 19.6863 19.049C19.904 19.7181 19.5451 20.2857 19.097 20.5487C18.6585 20.806 18.0554 20.8404 17.5447 20.512L12.8173 17.4719C12.2948 17.1359 11.5857 17.135 11.0963 17.4441L6.46484 20.3691C5.94281 20.6988 5.33707 20.6351 4.9118 20.3799C4.48468 20.1236 4.10335 19.5712 4.30272 18.8969C5.78977 13.8676 7.79972 8.97844 10.3077 4.28867L10.472 3.98149C10.7563 3.44998 11.3042 3.24448 11.7623 3.25011ZM11.7551 4.76304L11.6305 4.99605C9.22521 9.49368 7.2879 14.1762 5.8404 18.9894L10.2954 16.1759C11.2941 15.5451 12.6321 15.5694 13.6286 16.2102L18.1247 19.1016C16.5242 14.2751 14.4428 9.56596 11.9034 5.02815L11.7551 4.76304Z" fill="white"/>
                    </svg>                  
                </div>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a href="/">
                    <button class="dropdown-item" type="button">
                      <img class="forward-icon me-2" src="/common/icon/logo_blv-final-black.png" alt="blv-logo"> 主站首页
                     </button>
                  </a>
                </li>
                <li>
                  <a href="/micro/discovery-oasis">
                    <button class="dropdown-item" type="button">
                      <img class="forward-icon me-2" src="/common/icon/community.svg" alt="shopping-logo"> 彩虹部落
                     </button>
                  </a>
                </li>
                <li>
                  <a href="/home">
                    <button class="dropdown-item" type="button">
                      <img class="forward-icon me-2" src="/common/icon/choice-shopping.svg" alt="shopping-logo"> 心选商店
                     </button>
                  </a>
                </li>
                <li>
                  <a href="/micro/affiliate/dashboard">
                    <button class="dropdown-item" type="button" >
                      <i class="bi bi-megaphone-fill affiliate-icon me-2"></i> 带货中心
                     </button>
                  </a>
                </li>
                
                <li>
                  <a href="/epod/pod-millstone">
                    <button class="dropdown-item" type="button" >
                      <i class="bi bi-tags me-2"></i> 我的定制
                     </button>
                  </a>
                </li>
              </ul>
  
            </div>
  
           
  
            <div class="btn-group private-msg-atom" style="margin-right: 8px;">
              <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="tooltip-nav" data-bs-custom-class="custom-tooltip" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-trigger="hover" data-bs-title="消息">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.80403 8.3533C2.52389 10.9562 2.53637 13.9582 2.9262 16.5505C3.1419 17.9849 4.31257 19.0845 5.75763 19.2102L7.26787 19.3414C10.4169 19.6152 13.5838 19.6152 16.7328 19.3414L18.2431 19.2102C19.6881 19.0845 20.8588 17.9849 21.0745 16.5505C21.4643 13.9582 21.4768 10.9564 21.1967 8.35345C21.1605 8.05169 21.1197 7.75034 21.0745 7.44949C20.8588 6.0151 19.6881 4.91545 18.2431 4.78983L16.7328 4.65855C13.5838 4.38481 10.4169 4.38481 7.26787 4.65855L5.75763 4.78983C4.31257 4.91545 3.1419 6.0151 2.9262 7.44949C2.88096 7.75028 2.84024 8.05159 2.80403 8.3533ZM7.39777 6.15292C10.4604 5.88669 13.5403 5.88669 16.6029 6.15292L18.1131 6.2842C18.8675 6.34977 19.4786 6.92379 19.5912 7.67254C19.6029 7.7503 19.6142 7.82809 19.6253 7.90592L14.0643 10.9954C12.7807 11.7085 11.2199 11.7085 9.93632 10.9954L4.37539 7.90596C4.38645 7.82812 4.39783 7.75031 4.40952 7.67254C4.52211 6.92379 5.13321 6.34977 5.88754 6.2842L7.39777 6.15292ZM19.8088 9.51989C20.0028 11.7876 19.9303 14.0725 19.5912 16.3274C19.4786 17.0762 18.8675 17.6502 18.1132 17.7158L16.6029 17.8471C13.5403 18.1133 10.4604 18.1133 7.39777 17.8471L5.88754 17.7158C5.13321 17.6502 4.52211 17.0762 4.40952 16.3274C4.07043 14.0725 3.99787 11.7877 4.19184 9.51992L9.20786 12.3066C10.9445 13.2714 13.0561 13.2714 14.7928 12.3066L19.8088 9.51989Z" fill="white"/>
                    </svg>  
                </div>
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <div class="friend-header">
                  私信（{{friends.totalUnRead}}）
                </div>
                <div class="friend-list">
  
                  <li class="friend-item"   v-for="friend in friends.records">
                    <a target="_blank" :href="'/micro/arch/channel-0002?friend='+ friend.id">
                      <div class="friend-container">
                        <div class="frend-avatar-container">
                          <img class="frend-avatar" :src="adaptiveImageUriV(friend.avatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                          <div v-if="friend.brandMark=='3'" class="online-indicator">
                            <div class="online-indicator-content">
                            </div>
                          </div>
                        </div>
                        <div class="friend-info">
                          <div class="friend-name"><span class="ellipsis-1">{{friend.title}}</span> </div>
                          <div class="friend-msg"> <span class="ellipsis-1">{{friend.latestContent}}</span> </div>
                          <div class="msg-time">{{getPublishTimeV(friend.modifiedAt)}}</div>
                        </div>
                      </div>
                    </a>
                  </li>
  
                 
  
                </div>
                
  
  
              </ul>
            </div>
  
            <div class="btn-group">
              <button type="button" class="btn btn-secondary dropdown-toggle button_user_vue brand-avatar" data-bs-toggle="dropdown" aria-expanded="false">
                <img  :src="adaptiveImageUriV(getIdentity().avatar)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
              </button>
              <ul class="dropdown-menu dropdown-menu-end">
                <li>
                  <a href="/estudio/studio-setting-profile">
                    <button class="dropdown-item" type="button">
                      <i class="bi bi-person-vcard me-2"></i> 品牌形象
                     </button>
                  </a>
                </li>
                <li>
                    <button @click="logout()" class="dropdown-item" type="button">   
                      <i class="bi bi-box-arrow-right me-2"></i> 退出登录 
                    </button>
                </li>
                <li>
                  <a href="/mall/delete-account">
                    <button class="dropdown-item" type="button">
                      <i class="bi bi-trash3 me-2"></i> 删除账号
                     </button>
                  </a>
                </li>
                
                <li>
                  <button class="dropdown-item" type="button" data-bs-toggle="offcanvas" data-bs-target="#feedback_offcanvas_right" aria-controls="feedback_offcanvas_right">
                    <i class="bi bi-flag me-2"></i> 反馈
                  </button>
                </li>
              </ul>
            </div>
    
            
          </div>
  
  
        </div>
      </header>
      <content class="bd-layout">
        <aside>
          <div class="offcanvas-xxl offcanvas-start" tabindex="-1" id="bdSidebar" aria-labelledby="bdSidebarOffcanvasLabel">
            <div class="offcanvas-header">
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#bdSidebar" aria-label="Close"></button>
            </div> 
            <!-- menu -->
            <div class="sidebar-wrapper">
              <nav class="sidebar nav">
                <a class="nav-link" href="/estudio/studio-store">
                  <div class="nav-icon">
                    <i class="bi bi-shop-window"></i>
                  </div>
                  <span>我的店铺</span>
                </a>
                <a class="nav-link" href="/estudio/studio-order-history">
                  <div class="nav-icon">
                    <i class="bi bi-calendar2-check"></i>
                  </div>
                  <span>预约订单</span>  
                </a>
                <a class="nav-link" href="/estudio/studio-millstone">
                  <div class="nav-icon">
                    <i class="bi bi-truck"></i>
                  </div>
                  <span>履约中心</span>        
                </a>
                <a class="nav-link" href="/estudio/studio-bill">
                  <div class="nav-icon">
                    <i class="bi bi-receipt"></i>
                  </div>
                  <span>账单管理</span>
                </a>
                <a class="nav-link active" href="/estudio/studio-mps">
                  <div class="nav-icon">
                    <i class="bi bi-columns"></i>
                  </div>
                  <span>合约助手</span>
                </a>
                <a class="nav-link" href="/estudio/studio-promotion">
                  <div class="nav-icon">
                    <i class="bi bi-gift"></i>
                  </div>
                  <span>营销活动</span>
                </a>
                <a class="nav-link" href="/estudio/studio-msg">
                  <div class="nav-icon">
                    <i class="bi bi-bell"></i>
                  </div>
                  <span>消息通知<sup v-if="includeUnprocessedFeed" class="disabled dot-info"></sup></span>
                </a>
                <a class="nav-link" href="/estudio/studio-dsp">
                  <div class="nav-icon">
                    <i class="bi bi-shield-plus"></i>
                  </div>
                  <span>争端解决</span>
                </a>
                <a class="nav-link" href="/estudio/studio-shop">
                  <div class="nav-icon">
                    <i class="bi bi-bag"></i>
                  </div>
                  <span>补给商城</span>
                </a>
              </nav>
            </div>
          </div>
        </aside>
        <main>
          <div class="main-content-container">
            <div class="nav-tabs-container">
              <ul class="nav nav-tabs" id="tob-tablist" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="sow-tab" data-bs-toggle="tab" data-bs-target="#sow-tab-pane" type="button" role="tab" aria-controls="sow-tab-pane" aria-selected="true">
                    <i class="bi bi-briefcase"></i>
                    服务内容
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="event-tab" data-bs-toggle="tab" data-bs-target="#event-tab-pane" type="button" role="tab" aria-controls="event-tab-pane" aria-selected="false">
                    <i class="bi bi-chat-dots"></i>
                    沟通
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="deliver-tab" data-bs-toggle="tab" data-bs-target="#deliver-tab-pane" type="button" role="tab" aria-controls="deliver-tab-pane" aria-selected="false">
                    <i class="bi bi-box-seam"></i>
                    交付
                  </button>
                </li>
              </ul>
            </div>
            <!-- tab content -->
            <div class="tab-content">
              <div class="tab-pane fade" id="event-tab-pane" role="tabpanel" aria-labelledby="event-tab" tabindex="0">

                <div class="chat-container d-flex">

                  <div class="msg-room-panel">
                    <section class="event-wrapper">
  
                      <div  class="row gx-3 gy-3  row-cols-1">
  
                        <div class="col">
                          <div  v-preventreclick  @click="changeChannelToBroadCastV" class="record-container">

                            
                            <div class="opt_item_head">
                              <button 
                                :class="{
                                  'channel_active': currentRTMChannel===urlMpsId
                                }"
                                class="btn btn-outline-primary">
                                <i class="bi bi-people-fill"></i>     
                              </button>
                              <sup v-if="broadCastChannelHaveNewMsgV()" class="disabled dot-info"></sup>
                            </div>

                            <span class="paper-head">公共</span>                         
                          </div>
                        </div>
                        <div class="col" v-for="record in mpmc__paperList.records">
                          <div  v-preventreclick  @click="changePaperChannelV(record.id)" class="record-container" >


                            <div class="opt_item_head">
                              <button 
                                :class="{
                                  'channel_active': currentRTMChannel===record.id
                                }"
                                class="btn btn-outline-primary">
                                <i class="bi bi-person-fill"></i>    
                              </button>
                              <sup v-if="paperChannelHaveNewMsgV()" class="disabled dot-info"></sup>
                            </div>
                            <div class="paper-head-wrapper">
                              <div class="paper-head">{{record.piece}}</div> 
                              <div class="text-center" :style="{color: paperProgressColorV(record.tag)}">:::: {{record.id.substring(0,3)}} ::::</div>
                            </div>
  
                        </div>
  
                      </div>
                      
                      
                    </section>
                  </div>

                  <!-- room msg pannle start -->
                  <div class="room-msg-panel">
                    <div class="room-msg-container">
  
                      <div v-for="(item,i) in eventObj.records" class="event-date">
                        <a class="btn btn-dark tag-collapse-ctl" data-bs-toggle="collapse" :href="'#block_'+i" role="button" :aria-expanded="eventObj.records.length<3 || i > eventObj.records.length-3">
                          <div class="bi date-tag">{{item.stampDate}}</div>
                        </a>
                        <div class="collapse" 
                        :class="{'show': eventObj.records.length<3 || i > eventObj.records.length-3 }"
                           :id="'block_'+i">
                          <section v-for="record in item.cards" class="event-wrapper new-order">
                            <label>
                              <span class="event-icon new-order">
                                  <img :src="adaptiveImageUriV(record.authorIcon)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                              </span>
                              <p class="event-header-base border-0">
                                <span class="event-title">{{record.author}}</span>
                                <i class="simple-time ms-2"> {{record.createAt.substr(-8,8)}}</i>
                              </p>
                            </label>
                            <div class="event-msg-content">
                              <p v-if="record.msgType === 'text'" class="text-preline text-message">{{JSON.parse(record.msg).content}}</p>
                              <div  v-if="record.msgType === 'image'">
                                <a target="_blank" :href="'/mall/preview?uri='+JSON.parse(record.msg).uri" rel="noopener noreferrer">
                                  <img  :src="JSON.parse(record.msg).uri" class="img-message">
                                </a>
                                <p>
                                  <a target="_blank" class="download" download="" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                                </p>
                              </div>
                              <div v-if="record.msgType === 'attachment'">
                                <div class="attachment-message">
                                  <span> {{JSON.parse(record.msg).fileName}}</span>
                                  <i class="bi bi-file-earmark"></i>
                                </div>
                                <p><a target="_blank" class="download" :download="JSON.parse(record.msg).fileName" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a></p>
                              </div>
                            </div>
                          </section>
                        </div>
                        
                      </div>
  
                    </div>
  
                
                    <div class="chat-input-wrapper">
                      <div class="input-wrapper">
                        <textarea @input="autoHeightV($event)" id="twemoji-picker" class="chat-input" placeholder="Enter your message here"></textarea>
                      </div>
                      <div class="chat-action-wrapper">
                        <div class="chat-action-option">
                          <span>
                            <div class="chat-attachment-btn chat-btn-container">
                              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-paperclip" viewBox="0 0 24 24">
                                <defs></defs>
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
                              </svg>
                              <input @change="handleBigFileChange($event)" id="selection_attachment" type="file" class="input-file">
                            </div>
                          </span>
                          <span>
                            <div id="selection-outer" class="selection-outer ms-2 chat-btn-container">
                              <div id="selection">
                                <button id="selection-emoji" class="empty emoji-btn">
                                  <i class="bi bi-emoji-smile"></i>
                                </button>
                              </div>
                            </div>
                          </span>
                          <span>
                            <div class="ms-2 chat-btn-container">
                              <div class="img-btn" >
                                <i class="bi bi-image chat-image-btn"></i>
                                <input @change="handleFileChange($event)" type="file"   id="selection_image" class="input-file">
                              </div>
                            </div>
                          </span>
                        </div>
                        <button v-preventreclick @click="sendTextMessageV" class="chat-send-btn">发送</button>
                      </div>
                    </div>
  
                  </div>
                  <!-- room msg pannle end -->

                </div>
                
                
                
                
              </div>
            <!-- event tab end -->
            <!-- sow tab begin -->
              <div class="tab-pane fade  show active" id="sow-tab-pane" role="tabpanel" aria-labelledby="sow-tab" tabindex="0">
                <div class="paper-info-container pb-5">


                <div class="mps-panel">
                  <section class="event-wrapper">
                    <div  class="row gx-3 gy-3  row-cols-5 row-cols-lg-5 row-cols-xl-6 row-cols-xxl-6">
                      
                      <div  v-for="record in mpmc__paperList.records" class="col">

                        <div v-preventreclick @click="findPaperDetailV(record.id)" class="record-container">
                          <div class="event-icon new-order">
                            <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <circle v-show="!(mpmc__paperDetail.paperId===record.id)" cx="50" cy="50" r="50" fill="#4CFFA9" fill-opacity="0.7"/>
                              <rect v-show="mpmc__paperDetail.paperId===record.id"  rx="10" ry="10" width="100" height="100" fill="#4CFFA9" fill-opacity="0.7" />
                              <path d="M59.05 33H64C64.5304 33 65.0391 33.2107 65.4142 33.5858C65.7893 33.9609 66 34.4696 66 35V68C66 68.5304 65.7893 69.0391 65.4142 69.4142C65.0391 69.7893 64.5304 70 64 70H36C35.4696 70 34.9609 69.7893 34.5858 69.4142C34.2107 69.0391 34 68.5304 34 68V35C34 34.4696 34.2107 33.9609 34.5858 33.5858C34.9609 33.2107 35.4696 33 36 33H43V36H57V33H59.05Z" stroke="#FAF7F7" stroke-width="4" stroke-linejoin="round"/>
                              <path d="M53 45L45 53.001H55.004L47 61.001M43 30H57V36H43V30Z" stroke="#FAF7F7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>                          
                          </div>
                          <div class="paper-head-wrapper">
                            <div class="paper-head">{{record.piece}}</div> 
                            <div class="text-center" :style="{color: paperProgressColorV(record.tag)}">:::: {{record.id.substring(0,3)}} ::::</div>
                          </div>
                        </div>

                      </div>

                    </div>
                    
                  </section>
                </div>
                <div v-show="isEmptyObjectV(mpmc__paperDetail)" class="content-block">

                  点击商单查看商单明细！

                </div>
                <div v-show="!isEmptyObjectV(mpmc__paperDetail)" class="mps-panel-detail">
                  <h1 class="deltail-title">{{mpmc__paperDetail.title}}</h1>
                  <h2 class="detail-sow-heading">合约内容</h2>
                  <p class="detail-sow-content">
                    {{mpmc__paperDetail.sow}}
                  </p>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      商单号
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.paperId}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      职能
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.piece}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      奖金/元
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.bonus}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      采购商
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.purchaser}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      服务商
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.supplier}}<a v-if="!!mpmc__paperDetail.supplier" :href="'/micro/arch/channel-0002?friend=' + mpmc__paperDetail.supplierUserId" class="visit-brand-link ms-3" target="_blank"><span>私信服务商</span></a>
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      交付周期/天
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.deliveryCycle}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      合约有效期/天
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.contractValidityPeriod}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      创单时间
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{mpmc__paperDetail.createAt}}
                      </span>
                    </div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-item-head">
                      状态
                    </div>
                    <div class="detail-item-content">
                      <span>
                        {{ (mpmc__paperDetail.tag==='2' && paperAlreadyInvalidV() )? '已失效' : explainPaperTagV(mpmc__paperDetail.tag)}}
                      </span>
                    </div>
                  </div>

                  <div class="mt-5 pb-5">
                    <button v-preventreclick v-if="mpmc__paperDetail.tag==='2'" @click="offLineMpsPaperV(mpmc__paperDetail.paperId)"  class="btn btn-primary">下线</button>
                    <!-- <button type="button" class="btn btn-primary me-5" data-bs-toggle="modal" data-bs-target="#editPaperModal">
                      编辑
                    </button> -->
                    <button v-preventreclick v-if="mpmc__paperDetail.tag==='1' || mpmc__paperDetail.tag==='3'" @click="showEditPaperModelV" class="btn btn-dark">编辑</button>


                    <button v-preventreclick v-if="mpmc__paperDetail.tag==='3'" @click="onlineMpsPaperV(mpmc__paperDetail.paperId)" class="btn btn-primary ms-5">上线</button>


                  </div>
                </div>

                </div>

              </div>
            <!-- sow tab end -->
            <!-- deliver tab begin -->
              <div class="tab-pane fade" id="deliver-tab-pane" role="tabpanel" aria-labelledby="deliver-tab" tabindex="0">

                <div class="deliver-panel-container">

                  <div class="deliver-panel-header">
                    <section class="event-wrapper new-order">
                      <div  class="row gx-3 gy-3  row-cols-5 row-cols-lg-5 row-cols-xl-6 row-cols-xxl-6">
                        <div v-for="record in mpmc__paperList.records" class="col">
                         
                          <div v-preventreclick @click="fetchPaperDeliverDetailV(record.id)" class="record-container">
                            <div class="event-icon new-order">
                              <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle v-show="!(mpdc__current_active_paper===record.id)" cx="50" cy="50" r="50" fill="#4CFFA9" fill-opacity="0.7"/>
                                <rect v-show="mpdc__current_active_paper===record.id"  rx="10" ry="10" width="100" height="100" fill="#4CFFA9" fill-opacity="0.7" />
                                <path d="M59.05 33H64C64.5304 33 65.0391 33.2107 65.4142 33.5858C65.7893 33.9609 66 34.4696 66 35V68C66 68.5304 65.7893 69.0391 65.4142 69.4142C65.0391 69.7893 64.5304 70 64 70H36C35.4696 70 34.9609 69.7893 34.5858 69.4142C34.2107 69.0391 34 68.5304 34 68V35C34 34.4696 34.2107 33.9609 34.5858 33.5858C34.9609 33.2107 35.4696 33 36 33H43V36H57V33H59.05Z" stroke="#FAF7F7" stroke-width="4" stroke-linejoin="round"/>
                                <path d="M53 45L45 53.001H55.004L47 61.001M43 30H57V36H43V30Z" stroke="#FAF7F7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>                          
                            </div>
                            <div class="paper-head-wrapper">
                              <div class="paper-head">{{record.piece}}</div> 
                              <div class="text-center" :style="{color: paperProgressColorV(record.tag)}">:::: {{record.id.substring(0,3)}} ::::</div>
                            </div>
                          </div>
  
                        </div>
                      </div>
                      
                    </section>
                  </div>
                  <div v-show="isEmptyObjectV(mpdc__paperDeliver) " class="content-block">
  
                    点击商单查看交付内容！
  
                  </div>
                  <div v-show="(!isEmptyObjectV(mpdc__paperDeliver)) && isEmptyObjectV(mpdc__paperDeliver.records) " class="content-block">
  
                    还没有交付记录！
  
                  </div>
  
                  <div class="deliver-record-container">
                    <div v-for="record in mpdc__paperDeliver.records" class="deliver-record">
                      <div v-if="record.tag=='3'" class="d-flex">
                        <div>
                          交付内容：
                        </div>
                        <div class="record-filename">
                          {{record.deliverName}}
                        </div>
                        <div class="ms-2">
                          <a target="_blank" class="download" :download="record.deliverName" :href="record.deliver"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                        </div>
                      </div>
                      <div v-else class="d-flex">
                        
                          <div>
                            预览内容：
                          </div>
                          <div class="record-filename">
                            {{record.previewName}}
                          </div>
                          <div class="ms-2">
                            <a target="_blank" class="download" :download="record.previewName" :href="record.preview"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                          </div>
                     
                      </div>
                      <div class="py-2">
                        <span>
                          状态：
                          {{paperDeliverTagExplainV(record.tag)}}
                        </span>
                        
                      </div>
                      <div class="py-2">
                        <span>
                          提交时间：
                          {{record.createAt}}
                        </span>
                        
                      </div>
                      
                      <div v-if="!!record.msg" class="d-flex">
                        <div class="delivery-remark-heading">留言：</div>
                        <div class="delivery-remark-content">
                          <p class="delivery-remark">
                            {{record.msg}}
                          </p>
                        </div>
                      </div>
                      <div v-else class="leave-msg-container py-4" >
                          <textarea class="form-control" rows="6" maxlength="600" v-model="record.newMsg"></textarea>
                          <div class="py-2">
                            <button 
                            :class="{'disabled': !record.newMsg, 
                            'btn-primary': record.newMsg,
                            'btn-secondary': !record.newMsg}"
                             v-preventreclick class="btn" @click="leaveMessageV(record)">留言</button>
                          </div>
                      </div>
                      <div v-show="record.tag=='1'" class="py-4">
                        <button v-preventreclick @click="revisionPaperDeliverV(record)" class="btn btn-dark">再次修订</button>
                        <button v-preventreclick @click="acceptPaperDeliverV(record)" class="btn btn-primary ms-5">接受交付</button>
                      </div>
                    </div>
                  </div>


                </div>
                
                
                
              </div>

            <!-- deliver tab end -->



            </div>
          </div>
      
           
          
        </main>
        <section class="modals">

          <div class="modal-container">
              
            <!-- edit paper  Modal -->
            <div class="modal fullscreen-modal fade" id="editPaperModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5">编辑商单</h1>
                    <button type="button" @click="closeEditPaperModalHandlerV" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
              
                    <div class="row mb-3 mt-3">
                      <label   class="col-sm-4 col-form-label"> 
                        合约内容 <div class="help-text"> 设置合约内容，如工作范围,交付物,Tech Pack 等 </div>
                      </label>
                      <div class="col-sm-8">
                        <textarea rows="13" @change="btn_ctl.activate_edit_mps_save_btn=true" v-model="mpmc_putPaper.sow" class="form-control" aria-label="With textarea"></textarea>
                      </div>
                    </div>
                    <div class="row mb-3 mt-3">
                      <label for="inputTitle" class="col-sm-4 col-form-label"> 
                        奖金 <div class="help-text"> 完成合约时支付给服务商的货币奖励(单位：元) </div>
                      </label>
                      <div class="col-sm-8">
                        <input @input="transformInputNumberV($event)" min="1" max="50000" step="1" @change="btn_ctl.activate_edit_mps_save_btn=true" class="form-control"  v-model="mpmc_putPaper.bonus" type="text">
                      </div>
                    </div>
              
                  </div>
                  <div class="modal-footer btn-light">
                    <button v-preventreclick 
                    :class="{'disabled': !btn_ctl.activate_edit_mps_save_btn || !validatePutTemplateV(), 
                    'btn-primary': btn_ctl.activate_edit_mps_save_btn && validatePutTemplateV(),
                    'btn-secondary': !btn_ctl.activate_edit_mps_save_btn || !validatePutTemplateV()}"
                      @click="modifyMpsPaperV" type="button"   class="btn">保存</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-container">
            <!-- Modal -->
            <div class="modal fade" id="imagePreviewModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5">预览</h1>
                    <button @click="resetFileInput" type="button" id="closeImagePreviewModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body d-flex justify-content-center">
                    <div v-if="errors.length == 0" class="image-upload-container">
                      <img id="imagePreview" :src="file.url" >
                    </div>
                    <div v-if="errors.length > 0">
                      <div>文件不符合要求，提示信息：</div>
                      <div v-for="error in errors">
                        <span>{{error}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer btn-light">
                    <button @click="sendImageMessageV"
                    :class="{'disabled': errors.length > 0, 
                          'btn-primary': errors.length == 0,
                          'btn-secondary': errors.length > 0}"
                     v-preventreclick type="button" class="btn btn-primary">选中</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <div class="modal-container">
            <!-- Modal -->
            <div class="modal fade" id="sendBigFileModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5">文件信息</h1>
                    <button @click="resetBigFileInput" type="button" id="closeSendFileModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body d-flex justify-content-center">
                    <div v-if="errors.length == 0" class="file-info-container">
                      选中文件: {{bigfile.fileName}}
                    </div>
                    <div v-if="errors.length > 0">
                      <div>文件不符合要求，提示信息：</div>
                      <div v-for="error in errors">
                        <span>{{error}}</span>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer btn-light">
                    <button @click="sendAttachmentV"
                    :class="{'disabled': errors.length > 0, 
                          'btn-primary': errors.length == 0,
                          'btn-secondary': errors.length > 0}"
                     v-preventreclick type="button" class="btn btn-primary">发送</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </section>
        
      </content>
      <footer></footer>
  </pt-app>
  <section class="feedback_offcanvas" id="section_feedback_offcanvas">

    <div class="offcanvas offcanvas-end" tabindex="-1" id="feedback_offcanvas_right" aria-labelledby="feedbackOffcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="feedbackOffcanvasRightLabel">发送反馈到Bluvarri</h5>
        <button id="closeFeedbackOffcanvas" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <form id="feedback-form">
          <div class="mt-3">
            <label for="input_issue" class="form-label">您遇到的具体问题是什么(必填,300字以内)</label>
            <textarea  rows="8" type="text" maxlength="300" class="form-control"  id="input_issue"></textarea>
          </div> 
          <div class="mt-3">
            <label class="form-label">附件图片(选填)</label>
            <div class="feedback-attachment-upload-container dropzone-wrapper">
              <img  id="lastestFeedbackAttachment" >
              <div class="dropzone-desc">
                <i class="bi bi-cloud-plus"></i>
              </div>
              <input type="file" id="input_issue_attachment"  accept="image/jpg, image/png, image/jpeg" class="dropzone">
            </div>
          </div>  
          <div class="mt-3">
            <label for="input_issue_contact" class="form-label">您的联系方式(选填)</label>
            <input id="input_issue_contact"  min="1" max="50000" step="1" type="text" class="form-control" placeholder="请留下邮箱或电话，使我们快速反馈">
          </div> 
          <button type="submit" class="btn btn-primary mt-5 w-100">提交</button>
        </form>
      </div>
    </div>

  </section>
  <script type="module" src="/common/javascripts/feedback.js"></script>
  <script type="module" src="/common/javascripts/tm.js"></script>
  <script type="module" src="/estudio/javascripts/studio-mps-action.js"></script>



</body>
</html>