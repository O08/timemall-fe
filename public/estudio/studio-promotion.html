<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”robots” content=”noindex,nofollow”>
    <meta http-equiv ='content-language' content ='zh-cn'>

    <link rel="icon" href="https://www.bluvarri.com/favicon.png">
    <title>营销活动 - E-Studio</title>
    <script src="/common/javascripts/avif-webp.min.js"></script>


    <link rel="stylesheet" href="/estudio/stylesheets/studio.scss">
    <link rel="stylesheet" href="/estudio/stylesheets/studio-promotion.scss">



</head>
<body>
  <pt-app id="app" v-cloak>
      <!-- header nav -->
    <header class="text-white">
      <div class="d-flex justify-content-between align-items-center hdlayout">

        <div class="d-flex">
          <div class="toggle-nav">
            <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
              </svg>
            </button>
          </div>
          <a href="/estudio/studio-store">
            <div class="d-flex align-items-center logo">
              <img src="/common/icon/logo_blv-final-white.png" alt="logo">
              <h2 class="mb-0 ms-2">E-Studio</h2>
            </div>
          </a>

        </div>
        
        <div>
          
          <div class="btn-group" style="margin-right: 8px;" >
          
            <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false" >
              <div class="tooltip-nav" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-title="传送">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7623 3.25011C12.2215 3.25576 12.752 3.47285 13.0382 3.98431L13.2124 4.29565C15.8706 9.04584 18.0375 13.9835 19.6863 19.049C19.904 19.7181 19.5451 20.2857 19.097 20.5487C18.6585 20.806 18.0554 20.8404 17.5447 20.512L12.8173 17.4719C12.2948 17.1359 11.5857 17.135 11.0963 17.4441L6.46484 20.3691C5.94281 20.6988 5.33707 20.6351 4.9118 20.3799C4.48468 20.1236 4.10335 19.5712 4.30272 18.8969C5.78977 13.8676 7.79972 8.97844 10.3077 4.28867L10.472 3.98149C10.7563 3.44998 11.3042 3.24448 11.7623 3.25011ZM11.7551 4.76304L11.6305 4.99605C9.22521 9.49368 7.2879 14.1762 5.8404 18.9894L10.2954 16.1759C11.2941 15.5451 12.6321 15.5694 13.6286 16.2102L18.1247 19.1016C16.5242 14.2751 14.4428 9.56596 11.9034 5.02815L11.7551 4.76304Z" fill="white"/>
                  </svg>                  
              </div>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <a href="/">
                  <button class="dropdown-item" type="button">
                    <img class="forward-icon me-2" src="/common/icon/logo_blv-final-black.png" alt="blv-logo"> 主站首页
                   </button>
                </a>
              </li>
              <li>
                <a href="/micro/discovery-oasis">
                  <button class="dropdown-item" type="button">
                    <img class="forward-icon me-2" src="/common/icon/community.svg" alt="shopping-logo"> 彩虹部落
                   </button>
                </a>
              </li>
              <li>
                <a href="/home">
                  <button class="dropdown-item" type="button">
                    <img class="forward-icon me-2" src="/common/icon/choice-shopping.svg" alt="shopping-logo"> 心选商店
                   </button>
                </a>
              </li>
              <li>
                <a href="/micro/affiliate/dashboard">
                  <button class="dropdown-item" type="button" >
                    <i class="bi bi-megaphone-fill affiliate-icon me-2"></i> 带货中心
                   </button>
                </a>
              </li>
              
              <li>
                <a href="/epod/pod-millstone">
                  <button class="dropdown-item" type="button" >
                    <i class="bi bi-tags me-2"></i> 我的定制
                   </button>
                </a>
              </li>
            </ul>

          </div>

         

          <div class="btn-group private-msg-atom" style="margin-right: 8px;">
            <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="tooltip-nav" data-bs-custom-class="custom-tooltip" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-trigger="hover" data-bs-title="消息">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.80403 8.3533C2.52389 10.9562 2.53637 13.9582 2.9262 16.5505C3.1419 17.9849 4.31257 19.0845 5.75763 19.2102L7.26787 19.3414C10.4169 19.6152 13.5838 19.6152 16.7328 19.3414L18.2431 19.2102C19.6881 19.0845 20.8588 17.9849 21.0745 16.5505C21.4643 13.9582 21.4768 10.9564 21.1967 8.35345C21.1605 8.05169 21.1197 7.75034 21.0745 7.44949C20.8588 6.0151 19.6881 4.91545 18.2431 4.78983L16.7328 4.65855C13.5838 4.38481 10.4169 4.38481 7.26787 4.65855L5.75763 4.78983C4.31257 4.91545 3.1419 6.0151 2.9262 7.44949C2.88096 7.75028 2.84024 8.05159 2.80403 8.3533ZM7.39777 6.15292C10.4604 5.88669 13.5403 5.88669 16.6029 6.15292L18.1131 6.2842C18.8675 6.34977 19.4786 6.92379 19.5912 7.67254C19.6029 7.7503 19.6142 7.82809 19.6253 7.90592L14.0643 10.9954C12.7807 11.7085 11.2199 11.7085 9.93632 10.9954L4.37539 7.90596C4.38645 7.82812 4.39783 7.75031 4.40952 7.67254C4.52211 6.92379 5.13321 6.34977 5.88754 6.2842L7.39777 6.15292ZM19.8088 9.51989C20.0028 11.7876 19.9303 14.0725 19.5912 16.3274C19.4786 17.0762 18.8675 17.6502 18.1132 17.7158L16.6029 17.8471C13.5403 18.1133 10.4604 18.1133 7.39777 17.8471L5.88754 17.7158C5.13321 17.6502 4.52211 17.0762 4.40952 16.3274C4.07043 14.0725 3.99787 11.7877 4.19184 9.51992L9.20786 12.3066C10.9445 13.2714 13.0561 13.2714 14.7928 12.3066L19.8088 9.51989Z" fill="white"/>
                  </svg>  
              </div>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <div class="friend-header">
                私信（{{friends.totalUnRead}}）
              </div>
              <div class="friend-list">

                <li class="friend-item"   v-for="friend in friends.records">
                  <a target="_blank" :href="'/micro/arch/channel-0002?friend='+ friend.id">
                    <div class="friend-container">
                      <div class="frend-avatar-container">
                        <img class="frend-avatar" :src="adaptiveImageUriV(friend.avatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                        <div v-if="friend.brandMark=='3'" class="online-indicator">
                          <div class="online-indicator-content">
                          </div>
                        </div>
                      </div>
                      <div class="friend-info">
                        <div class="friend-name"><span class="ellipsis-1">{{friend.title}}</span> </div>
                        <div class="friend-msg"> <span class="ellipsis-1">{{friend.latestContent}}</span> </div>
                        <div class="msg-time">{{getPublishTimeV(friend.modifiedAt)}}</div>
                      </div>
                    </div>
                  </a>
                </li>

               

              </div>
              


            </ul>
          </div>

          <div class="btn-group">
            <button type="button" class="btn btn-secondary dropdown-toggle button_user_vue brand-avatar" data-bs-toggle="dropdown" aria-expanded="false">
              <img  :src="adaptiveImageUriV(getIdentity().avatar)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <a href="/estudio/studio-setting-profile">
                  <button class="dropdown-item" type="button">
                    <i class="bi bi-person-vcard me-2"></i> 品牌形象
                   </button>
                </a>
              </li>
              <li>
                  <button @click="logout()" class="dropdown-item" type="button">   
                    <i class="bi bi-box-arrow-right me-2"></i> 退出登录 
                  </button>
              </li>
              <li>
                <a href="/mall/delete-account">
                  <button class="dropdown-item" type="button">
                    <i class="bi bi-trash3 me-2"></i> 删除账号
                   </button>
                </a>
              </li>
              
              <li>
                <button class="dropdown-item" type="button" data-bs-toggle="offcanvas" data-bs-target="#feedback_offcanvas_right" aria-controls="feedback_offcanvas_right">
                  <i class="bi bi-flag me-2"></i> 反馈
                </button>
              </li>
            </ul>
          </div>
  
          
        </div>


      </div>
    </header>
      <content class="bd-layout">
        <aside>
          <div class="offcanvas-xxl offcanvas-start" tabindex="-1" id="bdSidebar" aria-labelledby="bdSidebarOffcanvasLabel">
            <div class="offcanvas-header">
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#bdSidebar" aria-label="Close"></button>
            </div> 
            <!-- menu -->
            <div class="sidebar-wrapper">
              <nav class="sidebar nav">
                <a class="nav-link" href="/estudio/studio-store">
                  <div class="nav-icon">
                    <i class="bi bi-shop-window"></i>
                  </div>
                  <span>我的店铺</span>
                </a>
                <a class="nav-link" href="/estudio/studio-order-history">
                  <div class="nav-icon">
                    <i class="bi bi-calendar2-check"></i>
                  </div>
                  <span>预约订单</span>  
                </a>
                <a class="nav-link" href="/estudio/studio-millstone">
                  <div class="nav-icon">
                    <i class="bi bi-truck"></i>
                  </div>
                  <span>履约中心</span>        
                </a>
                <a class="nav-link" href="/estudio/studio-bill">
                  <div class="nav-icon">
                    <i class="bi bi-receipt"></i>
                  </div>
                  <span>账单管理</span>
                </a>
                <a class="nav-link" href="/estudio/studio-mps">
                  <div class="nav-icon">
                    <i class="bi bi-columns"></i>
                  </div>
                  <span>合约助手</span>
                </a>
                <a class="nav-link active" >
                    <div class="nav-icon">
                      <i class="bi bi-gift"></i>
                    </div>
                    <span>营销活动</span>
                  </a>
                <a class="nav-link" href="/estudio/studio-msg">
                  <div class="nav-icon">
                    <i class="bi bi-bell"></i>
                  </div>
                  <span>消息通知<sup v-if="includeUnprocessedFeed" class="disabled dot-info"></sup></span>
                </a>
                <a class="nav-link" href="/estudio/studio-dsp">
                  <div class="nav-icon">
                    <i class="bi bi-shield-plus"></i>
                  </div>
                  <span>争端解决</span>
                </a>
                <a class="nav-link" href="/estudio/studio-shop">
                  <div class="nav-icon">
                    <i class="bi bi-bag"></i>
                  </div>
                  <span>补给商城</span>
                </a>
              </nav>
            </div>
          </div>
        </aside>
        <main>
          <div class="page-title-container">

            <div class="page-title">
              <h1>营销活动</h1>
            </div>

            <section class="section-coupon-list">

              <div v-if="isEmptyObjectV(promotion)">
                <div class="pt-5">
                  <span>你还未激活营销活动功能</span>
                </div>
                <div class="py-3">
                  <button v-preventreclick @click="initPromotionInfoV"  type="button" class="btn btn-primary" >
                    点击激活
                  </button>
                </div>
              </div>

              <div v-if="!isEmptyObjectV(promotion)" class="row g-3 row-cols-1  row-cols-md-1 row-cols-lg-2 row-cols-xl-3">

                <!-- col start -->

                <div class="col">

                  <div class="card border-0 coupon coupon-card-body-bg">

                    <div class="card-body px-0 py-0">
                      <div class="coupon-img-wrapper text-center">
                          <img src="/common/images/coupon-credit-n.svg">
                       </div>
                       <p class="coupon-title">用户体验金</p>
                       <div class="coupon-rule">
                          <p class="label">活动规则</p>
                          <ul>
                            <li>
                              客户购买你店铺内商品时享受的抵扣金额，每个客户只能申领一次
                            </li>
                            <li>该优惠可与【复购折扣券】和【尝鲜折扣券】一起使用，优先使用抵扣金</li>
                            <li>店铺客户申领之后可享受<span class="hi-contrast-txt">{{ promotion.creditPoint }}元</span>抵扣额度</li>
                          </ul>
                       </div>
                       <div class="coupon-info">
                          <p class="label">活动信息</p>
                          <ul>
                            <li>
                              <span v-if="promotion.creditPointTag=='1'">活动进行中</span>
                              <span v-if="promotion.creditPointTag=='2'">活动未开启</span>
                            </li>
                            <li>已发放 {{promotion.creditPointCnt}} 人次</li>
                          </ul>
                       </div>
                       <div class="pt-2">
                        <button @click="showSetupCreditPointModalV"  type="button"  class="btn btn-outline-dark edit-coupon">活动设置</button>
                       </div>
                    </div>

                  </div>

                </div>
                <!-- col end -->

                <!-- col start -->

                <div class="col">

                  <div class="card border-0 coupon coupon-card-body-bg">

                    <div class="card-body px-0 py-0">
                      <div class="coupon-img-wrapper text-center">
                          <img src="/common/images/coupon-early-bird-n.svg">
                       </div>
                       <p class="coupon-title">尝鲜折扣券</p>
                       <div class="coupon-rule">
                        <p class="label">活动规则</p>
                        <ul>
                          <li>
                            客户购买你店铺内新商品时享受的优惠折扣，店内任何商品，只要是客户第一次购买，均享受尝鲜优惠
                          </li>
                          <li>该优惠可与【复购折扣券】和【用户体验金】一起使用，优先使用抵扣金</li>
                          <li>店铺客户申领之后可享受<span class="hi-contrast-txt">{{ promotion.earlyBirdDiscount }}%</span>折扣优惠</li>
                        </ul>
                       </div>

                       <div class="coupon-info">
                          <p class="label">活动信息</p>
                          <ul>
                            <li>
                              <span v-if="promotion.earlyBirdDiscountTag=='1'">活动进行中</span>
                              <span v-if="promotion.earlyBirdDiscountTag=='2'">活动未开启</span>
                            </li>
                            <li>已发放 {{promotion.earlyBirdDiscountCnt}} 人次</li>
                          </ul>
                       </div>
                       <div class="pt-2">
                        <button  @click="showSetupEarlyBirdModalV" type="button"  class="btn btn-outline-dark edit-coupon">活动设置</button>
                       </div>


                    </div>

                  </div>

                </div>
                <!-- col end -->

                <!-- col start -->
                <div class="col">

                  <div class="card border-0 coupon coupon-card-body-bg">

                    <div class="card-body px-0 py-0">
                      <div class="coupon-img-wrapper text-center">
                          <img src="/common/images/coupon-resale-discount-n.svg">
                       </div>
                       <p class="coupon-title">复购折扣券</p>
                       <div class="coupon-rule">
                          <p class="label">活动规则</p>
                          <ul>
                            <li>客户再次购买你店铺内商品时享受的优惠折扣</li>
                            <li>该优惠可与【尝鲜折扣券】和【用户体验金】一起使用，优先使用抵扣金</li>
                            <li>店客户申领之后可享受<span class="hi-contrast-txt">{{ promotion.repurchaseDiscount }}%</span>折扣优惠</li>
                          </ul>
                       </div>


                       <div class="coupon-info">
                          <p class="label">活动信息</p>
                          <ul>
                            <li>
                              <span v-if="promotion.repurchaseDiscountTag=='1'">活动进行中</span>
                              <span v-if="promotion.repurchaseDiscountTag=='2'">活动未开启</span>
                            </li>
                            <li>已发放 {{promotion.repurchaseDiscountCnt}} 人次</li>
                          </ul>
                        </div>

                        <div class="pt-2">
                          <button @click="showSetupRepurchaseModalV" type="button"  class="btn btn-outline-dark edit-coupon">活动设置</button>
                         </div>

                    </div>

                  </div>

                </div>
                <!-- col end -->

              </div>

            </section>
              
          </div>
        </main>
        
      </content>

      <section class="modals">
         <!-- set up credit point modal -->
          <div class="modal-container">
            <div class="modal fade" id="setupCreditPointModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="setupCreditPointModalLabel">设置用户体验金</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="mt-3">
                        <label for="input_credit_point" class="form-label">体验金额</label>
                        <input  @input="transformInputNumberAsPositiveV($event)" v-model="updatePromotionObj.creditPoint" id="input_credit_point"  min="1" max="50000" step="1" type="text" class="form-control" placeholder="请输入发给用户的体验抵扣金额">
                      </div> 
                      <div class="input-group mt-3">
                        <label class="input-group-text" for="credit_tag">活动状态</label>
                        <select v-model="updatePromotionObj.creditPointTag" class="form-select" id="credit_tag">
                          <option value="1">启用</option>
                          <option value="2">关闭</option>
                        </select>
                      </div>
                      <button  v-preventreclick :class="{'disabled': !validatePromotionSetupV() , 
                      'btn-primary': validatePromotionSetupV(),
                      'btn-secondary': !validatePromotionSetupV()}"  @click="refreshPromotionSetupV"  type="submit" class="btn mt-5 w-100">更新</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- set early bird  modal -->
          <div class="modal-container">
            <div class="modal fade" id="setupEarlyBirdModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="setupEarlyBirdModalLabel">设置尝鲜折扣券</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="mt-3">
                        <label for="input_early_bird_discount" class="form-label">尝鲜优惠折扣</label>
                        <input @input="transformInputNumberAsPositiveV($event)"  v-model="updatePromotionObj.earlyBirdDiscount" id="input_early_bird_discount"  min="1" max="99" step="1" type="text" class="form-control" placeholder="请输入发给用户的尝鲜折扣">
                      </div> 
                      <div class="input-group mt-3">
                        <label class="input-group-text" for="early_bird_tag">活动状态</label>
                        <select  v-model="updatePromotionObj.earlyBirdDiscountTag" class="form-select" id="early_bird_tag">
                          <option value="1">启用</option>
                          <option value="2">关闭</option>
                        </select>
                      </div>
                      <button  v-preventreclick :class="{'disabled': !validatePromotionSetupV() , 
                      'btn-primary': validatePromotionSetupV(),
                      'btn-secondary': !validatePromotionSetupV()}"   @click="refreshPromotionSetupV"  type="submit" class="btn mt-5 w-100">更新</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- set repurchase  modal -->
          <div class="modal-container">
            <div class="modal fade" id="setupRepurchaseModal" data-bs-backdrop="static" tabindex="-1">
              <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content text-color-dark">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="setupRepurchaseModalLabel">设置复购折扣券</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <form>
                      <div class="mt-3">
                        <label for="input_repurchase_discount" class="form-label">复购优惠折扣</label>
                        <input @input="transformInputNumberAsPositiveV($event)" v-model="updatePromotionObj.repurchaseDiscount" id="input_repurchase_discount"  min="1" max="99" step="1" type="text" class="form-control" placeholder="请输入发给用户复购时使用的折扣">
                      </div> 
                      <div class="input-group mt-3">
                        <label class="input-group-text" for="repurchase_discount_tag">活动状态</label>
                        <select  v-model="updatePromotionObj.repurchaseDiscountTag" class="form-select" id="repurchase_discount_tag">
                          <option value="1">启用</option>
                          <option value="2">关闭</option>
                        </select>
                      </div>
                      <button  v-preventreclick :class="{'disabled': !validatePromotionSetupV() , 
                      'btn-primary': validatePromotionSetupV(),
                      'btn-secondary': !validatePromotionSetupV()}"   @click="refreshPromotionSetupV" type="submit" class="btn  mt-5 w-100">更新</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>

      </section>
  </pt-app>
  <section class="feedback_offcanvas" id="section_feedback_offcanvas">

    <div class="offcanvas offcanvas-end" tabindex="-1" id="feedback_offcanvas_right" aria-labelledby="feedbackOffcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="feedbackOffcanvasRightLabel">发送反馈到小咘</h5>
        <button id="closeFeedbackOffcanvas" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <form id="feedback-form">
          <div class="mt-3">
            <label for="input_issue" class="form-label">您遇到的具体问题是什么(必填,300字以内)</label>
            <textarea  rows="8" type="text" maxlength="300" class="form-control"  id="input_issue"></textarea>
          </div> 
          <div class="mt-3">
            <label class="form-label">附件图片(选填)</label>
            <div class="feedback-attachment-upload-container dropzone-wrapper">
              <img  id="lastestFeedbackAttachment" >
              <div class="dropzone-desc">
                <i class="bi bi-cloud-plus"></i>
              </div>
              <input type="file" id="input_issue_attachment"  accept="image/jpg, image/png, image/jpeg" class="dropzone">
            </div>
          </div>  
          <div class="mt-3">
            <label for="input_issue_contact" class="form-label">您的联系方式(选填)</label>
            <input id="input_issue_contact"  min="1" max="50000" step="1" type="text" class="form-control" placeholder="请留下邮箱或电话，使我们快速反馈">
          </div> 
          <button type="submit" class="btn btn-primary mt-5 w-100">提交</button>
        </form>
      </div>
    </div>

  </section>
  <script type="module" src="/common/javascripts/feedback.js"></script>
  <script type="module" src="/common/javascripts/tm.js"></script>
  <script type="module" src="/estudio/javascripts/studio-promotion.js"></script>



</body>
</html>