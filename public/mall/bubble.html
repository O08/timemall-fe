<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”robots” content=”index,nofollow”>
    <meta http-equiv ='content-language' content ='zh-cn'>

    <meta name="keywords" content="13区服务供应商数字服务空间">
    <meta name="description" content="13区服务供应商数字服务、数字空间">
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon">
    <title>Bubble - 13区</title>

    <link rel="stylesheet" href="/common/stylesheets/style.scss">
    <link rel="stylesheet" href="/mall/stylesheets/bubble.scss">

</head>
<body>
  <mall-app id="app">
    <header class="p-3 text-white w-100">
      <div class="mx-120 d-grid gap-3 align-items-center justify-content-center">
        <div class="d-flex align-items-center logo">
          <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.0119 2.1026V2.99675C11.0119 12.754 14.6637 21.1467 20.2322 24.2517V24.835C14.6636 27.9401 11.0118 36.3327 11.0118 46.0901V46.9843H38.4545V46.0901C38.4545 36.2755 34.7408 27.8802 29.1205 24.826V24.2607C34.7404 21.2062 38.4545 12.8108 38.4545 2.99666V2.1026H11.0116H11.0119ZM12.8242 3.89081H36.6423C36.4053 13.1209 32.5518 20.6889 27.8436 22.9267L27.3322 23.1691V25.9206L27.8437 26.1627C32.5516 28.4006 36.4049 35.9664 36.6423 45.1958H12.8242C13.0593 36.0181 16.8557 28.4403 21.5212 26.1568L22.0237 25.9116V23.1751L21.5212 22.9299C16.8559 20.6464 13.0592 13.0686 12.8242 3.89091V3.89081ZM33.2718 12.1332C27.7586 14.7947 21.3542 14.7976 16.2785 12.5251C17.681 17.3969 20.4719 20.8644 23.7554 21.4375C23.6022 21.6398 23.5192 21.8866 23.519 22.1403C23.519 22.7873 24.0443 23.3127 24.6914 23.3127C25.3385 23.3127 25.8638 22.7873 25.8638 22.1403C25.8638 21.88 25.777 21.641 25.6335 21.4465C29.0239 20.8838 31.9009 17.2289 33.2718 12.1333V12.1332ZM24.6914 24.7513C24.0443 24.7513 23.519 25.2765 23.519 25.9237C23.519 26.5708 24.0443 27.096 24.6914 27.096C25.3385 27.096 25.8638 26.5708 25.8638 25.9237C25.8638 25.2765 25.3385 24.7513 24.6914 24.7513ZM24.6914 28.5105C24.0443 28.5105 23.519 29.0359 23.519 29.6829C23.519 30.3301 24.0443 30.8553 24.6914 30.8553C25.3385 30.8553 25.8638 30.3301 25.8638 29.6829C25.8638 29.0359 25.3385 28.5105 24.6914 28.5105ZM24.6914 32.294C24.0443 32.294 23.519 32.8192 23.519 33.4663C23.519 34.1133 24.0443 34.6387 24.6914 34.6387C25.3385 34.6387 25.8638 34.1133 25.8638 33.4663C25.8638 32.8192 25.3385 32.294 24.6914 32.294ZM24.7034 36.1131C22.4821 36.1399 20.2828 38.5794 17.4478 43.3536H32.0904C29.1693 38.4725 26.9246 36.0863 24.7034 36.1131Z" fill="#3887FE"></path>
            </svg>
            <div class="align-middle">
              <h2 class="my-0">13区</h2>
            </div>
          </a>
        </div>
        <div class="header-offcanvas">
          <button class="btn btn-primary toggle-nav" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="offcanvas-xxl flex-grow-1 offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasRightLabel">13区</h5>
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#offcanvasRight" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body justify-content-end">
              <nav>
                <ul class="nav header-navbar col-12 col-lg-auto me-lg-auto mb-2 justify-content-end mb-md-0 text-center">
                  <li class="nav-item">
                    <a href="/estudio/studio-store.html" class="nav-link  px-lg-3 px-xl-5 text-white" data-bs-custom-class="custom-popover" data-bs-placement="bottom" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="服务商业务区"> 
                      E-Studio
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="/epod/pod-millstone.html" class="nav-link  px-lg-3 px-xl-5 text-white" data-bs-custom-class="custom-popover" data-bs-placement="bottom" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="用户功能区"> 
                      E-Pod
                    </a>
                  </li>
                  <li v-if="!user_already_login" class="nav-item"><a href="/login.html" class="nav-link  px-lg-3 px-xl-5 text-white">登录</a></li>
                  <li v-if="!user_already_login" class="nav-item join-now"><a href="/signup.html" class="nav-link px-lg-3 px-xl-5 text-white">注册</a></li>
                  <li v-if="user_already_login" class="nav-item">
                    <a @click="logout" class="nav-link px-lg-3 px-xl-5 text-white">
                      <i class="bi bi-box-arrow-right me-1"></i>注销
                    </a>
                 </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
        
      </div>
    </header>
    <content>
      <main>
        <!-- section bubble-->
        <section class="section-bubble-brand-info">
          <div class="brand-cover">
            <img :src="homeInfo.cover || defaultBannerImage" @error.once="e => { e.target.src = defaultBannerImage }">
          </div>
          <!-- brand avator -->
          <div class="d-flex portrait align-items-center my-4">
            <img class="service-brand" :src="homeInfo.avator || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
            <span class="service-brand-name mx-1">{{homeInfo.brand}}</span>
            <span v-show="Number(homeInfo.enableBlue)" class="service-brand-blue mx-2 px-2">尊享蓝标</span>
          </div>
          
        </section>
        <section class="section-tabs">
          <!-- bubble tablist -->
          <ul class="nav nav-tabs border-0" id="bubble-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">主页</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="service-tab" data-bs-toggle="tab" data-bs-target="#service-tab-pane" type="button" role="tab" aria-controls="service-tab-pane" aria-selected="false">全部服务</button>
            </li>
            <li v-if="user_already_login" class="nav-item" role="presentation">
              <button class="nav-link" id="cooperation-tab" data-bs-toggle="tab" data-bs-target="#cooperation-tab-pane" type="button" role="tab" aria-controls="cooperation-tab-pane" aria-selected="false">合作</button>
            </li>
          </ul>
        </section>

        
        <div class="content-container">
          
            <!-- bubble tablist content-->
            <div class="tab-content" id="bubble-tab-content">
              <!-- home tab-->
              <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                
                <section class="section-list-render">
                  <div class="subheader">最新服务</div>
                  <div class="row gx-3 gy-3  row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-5">
                    <div v-for="cell in homeInfo.cells" class="col">
                      <div class="cell-item">
                        <div class="card border-0 cell-card-body-bg px-3 pb-1">
                          <img :src="cell.preview || defaultCellPreviewImage" class="card-img-top cell-thumb" alt="..." @error.once="e => { e.target.src = defaultCellPreviewImage }">
                          <div class="card-body">
                            <p class="card-text mt-2">
                              <a :href="'/mall/cell-detail.html?cell_id='+cell.id + '&brand_id=' + cell.brandId " class="url-link">
                                {{cell.title}}
                              </a>
                            </p>
                          </div>
                          <div class="card-footer d-flex align-items-center justify-content-between card-footer-highlight">
                            <span class="vip-award">
                              <i class="bi bi-award-fill"></i>
                            </span>
                            <div class="price">
                              <i>￥</i>
                              <ins class="text-decoration-none price-txt">{{cell.price}}</ins>
                              <div class="line">
                              </div>
                              <span class="price-sbu">
                                {{ transformSbuV(cell.sbu) }}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </section>
              </div>

              <div class="tab-pane fade" id="service-tab-pane" role="tabpanel" aria-labelledby="service-tab" tabindex="0">
                <section class="section-list-render" id="service_library">
                  <div class="row gx-3 gy-3  row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-5">
                    <div v-for="cell in cells" class="col">
                      <div class="cell-item">
                        <div class="card border-0 cell-card-body-bg px-3 pb-1">
                          <img :src="cell.preview || defaultCellPreviewImage" class="card-img-top cell-thumb" alt="..." @error.once="e => { e.target.src = defaultCellPreviewImage }">
                          <div class="card-body">
                            <p class="card-text">
                              <a :href="'/mall/cell-detail.html?cell_id='+cell.id + '&brand_id=' + cell.brandId " class="url-link">
                                {{cell.title}}
                              </a>
                            </p>
                          </div>
                          <div class="card-footer d-flex align-items-center justify-content-between card-footer-highlight">
                            <span class="vip-award">
                              <i class="bi bi-award-fill"></i>
                            </span>
                            <div class="price">
                              <i>￥</i>
                              <ins class="text-decoration-none price-txt">{{cell.price}}</ins>
                              <div class="line">
                              </div>
                              <span class="price-sbu">
                                {{ transformSbuV(cell.sbu) }}
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                  </div>
                </section>
              </div>
              <div class="tab-pane fade" id="cooperation-tab-pane" role="tabpanel" aria-labelledby="cooperation-tab" tabindex="0">
                <section class="section-list-render" id="cooperation_library">
                  <div  class="row gx-3 gy-0  row-cols-2 row-cols-sm-2 row-cols-md-2 row-cols-lg-4 row-cols-xl-5 ms-3 me-3">
                    <div  class="col actio-item">
                      <button type="button" @click="retrieveOasesCreatedV" class="btn btn-primary option-invitation" data-bs-toggle="modal" data-bs-target="#inviteModal">
                        邀请成为基地成员
                      </button>
                    </div>
                    <div  class="col actio-item">
                      <button type="button" class="btn btn-primary option-swap" data-bs-toggle="modal" data-bs-target="#swapServiceModal">
                        服务互换
                      </button>
                    </div>
                  </div>
                </section>
              </div>
          </div>
        </div>
        
      </main>
      <section class="modals">
        <div class="modal-container">
          
          <!-- Modal -->
          <div class="modal fade" id="inviteModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="inviteModalLabel">邀请</h1>
                  <button type="button" id="closeInviteModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="input-group mb-3">
                    <input  @keyup.enter.native="searchOasesV" v-model="searchOasesQ" class="bubble-search-btn form-control" type="search" placeholder="搜索基地...">
                  </div>
                  <div class="mt-3">
                    <span>基地:</span>
                    <ul class="list-group ms-5">
                      <li v-for="oasis in displayOases" class="list-group-item">
                        <div class="form-check">
                          <input class="form-check-input" v-bind:value="oasis.id"  v-model="checkedOasisId" type="radio" name="flexRadioDefault">
                          <label class="form-check-label" for="flexRadioDefault1">
                            {{oasis.title}}
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                  
                </div>
                <div class="modal-footer btn-light">
                  <button @click="inviteBrandV" 
                  :class="{'disabled': !checkedOasisId  , 
                  'btn-primary': !!checkedOasisId  ,
                  'btn-secondary': !checkedOasisId }"
                   v-preventreclick  type="button"  class="btn">发出邀请</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="swapServiceModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  banner-modal-dialog-wrapper modal-dialog-centered modal-dialog-scrollable" >
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="swapServiceModalLabel">服务互换</h1>
                  <button type="button"  id="closeSwapServiceModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="d-flex justify-content-between ">
                    <button @click="loadSupplierServiceV" class="btn btn-info ms-3" data-bs-target="#querySupplierServiceModal" data-bs-toggle="modal">选择对方服务</button>
                    <button @click="loadMyselfServiceV" class="btn btn-info me-3" data-bs-target="#queryMyselfServiceModal" data-bs-toggle="modal">选择你用于交换服务</button>
                  </div>
                  <div class="mt-3">
                    <div class="ms-3">
                      <div class="row">
                        <label  class="col-3 pe-0 pt-0 col-form-label">对方的服务:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color ms-3">{{swapHelper.partnerCellTitle}}</p>
                        </div>
                      </div>
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">数量:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{swap.partnerCellQuantity}}</p>
                        </div>
                      </div>
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">单位:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{transformSbuV(swap.partnerCellSbu) }}</p>
                        </div>
                      </div>
                      
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">价值:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{swapHelper.partnerCellTotal}}</p>
                        </div>
                      </div>
                    </div>
                    <div class="ms-3"> 
                      <div class="row">
                        <label  class="col-3 pe-0 pt-0 col-form-label">我方的服务:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color ms-3">{{swapHelper.sponsorCellTitle}}</p>
                        </div>
                      </div>
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">数量:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{swap.sponsorCellQuantity}}</p>
                        </div>
                      </div>
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">单位:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{transformSbuV(swap.sponsorCellSbu)}}</p>
                        </div>
                      </div>
                      
                      <div class="row ms-2">
                        <label  class="col-3 pe-0 pt-0 col-form-label">价值:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6 mb-0 title-color">{{swapHelper.sponsorCellTotal}}</p>
                        </div>
                      </div>
                    </div>
                    <div class="col d-flex align-items-center ms-3 help-text fs-6">
                      <i class="bi bi-question-circle"></i><span class="ms-1">交换的服务价值差在10元内(包括10元)</span>
                    </div>
                  </div>
                
                </div>
                <div class="modal-footer btn-light">
                  <button  
                  :class="{'disabled': !swapHelper.sponsorCellTotal || !swapHelper. partnerCellTotal || Math.abs(swapHelper. partnerCellTotal-swapHelper.sponsorCellTotal )>10, 
                  'btn-primary': !!swapHelper.sponsorCellTotal && !!swapHelper. partnerCellTotal && Math.abs(swapHelper. partnerCellTotal-swapHelper.sponsorCellTotal )<=10  ,
                  'btn-secondary': !swapHelper.sponsorCellTotal || !swapHelper. partnerCellTotal || Math.abs(swapHelper. partnerCellTotal-swapHelper.sponsorCellTotal )>10 }"
                  @click="swapServiceV"  v-preventreclick type="button" class="btn btn-primary me-3">交换</button>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="querySupplierServiceModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  banner-modal-dialog-wrapper modal-dialog-centered modal-dialog-scrollable" >
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="querySupplierServiceModalLabel">选择对方服务</h1>
                </div>
                <div class="modal-body">
                  <div class="input-group mb-3">
                    <input  @keyup.enter.native="loadSupplierServiceV" v-model="supplierQ" class="bubble-search-btn form-control" type="search" placeholder="搜索服务...">
                  </div>
                  <div class="mt-3">
                    <span>选中服务信息:</span>
                    <section class="ms-4 me-4">
                      <div class="row mb-2 mt-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">服务:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6">{{swapHelper.partnerCellTitle}}</p>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label class="col-3 pe-0 pt-0 col-form-label">数量:</label>
                        <div class="col-9 px-0">
                          <input type="number" @change="computeSupplierTotalFeeV" class="form-control" v-model="swap.partnerCellQuantity">
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">单位:</label>
                        <div class="col-9 px-0">
                          <select class="form-select option-sbu" @change="computeSupplierTotalFeeV" v-model="swap.partnerCellSbu" aria-label="Default select example">
                            <option value="">计量</option>
                            <option :value="item.sbu" v-for="item in supplierCellPricing.fee">{{transformSbuV(item.sbu)}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">价值:</label>
                        <div class="col-9 px-0">
                          <span class="help-text fs-6">{{swapHelper.partnerCellTotal}}</span>
                        </div>
                      </div>
                    </section>
                    
                  </div>
         
                  <div class="mt-2">
                    <span>服务列表:</span>
                    <ul class="list-group ms-5 mt-3">
                      <li v-for="cell in supplierCells.records" class="list-group-item">
                        <div class="form-check">
                          <input class="form-check-input" @change="onSelectedSupplierCellV" v-model="swap.partnerCellId" type="radio" name="flexRadioDefault" id="cell.id" :value="cell.id">
                          <label class="form-check-label" for="flexRadioDefault1">
                            {{cell.title}}
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="modal-footer btn-light">
                  <button class="btn btn-primary" data-bs-target="#swapServiceModal" data-bs-toggle="modal">返回</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="queryMyselfServiceModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  banner-modal-dialog-wrapper modal-dialog-centered modal-dialog-scrollable" >
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="queryMyselfServiceModalLabel">选择你用于交换服务</h1>
                </div>
                <div class="modal-body">
                  
                  <div class="input-group mb-3">
                    <input  @keyup.enter.native="loadMyselfServiceV" v-model="myselfQ" class="bubble-search-btn form-control" type="search" placeholder="搜索服务...">
                  </div>

                  <div class="mt-3">
                    <span>选中服务信息:</span>
                    <section class="ms-4 me-4">
                      <div class="row mb-3 mb-2 mt-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">服务:</label>
                        <div class="col-9 px-0">
                          <p class="fs-6">{{swapHelper.sponsorCellTitle}}</p>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label class="col-3 pe-0 pt-0 col-form-label">数量:</label>
                        <div class="col-9 px-0">
                          <input type="number" @change="computeMyselfTotalFeeV" class="form-control" v-model="swap.sponsorCellQuantity">
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">单位:</label>
                        <div class="col-9 px-0">
                          <select class="form-select option-sbu" @change="computeMyselfTotalFeeV" v-model="swap.sponsorCellSbu" aria-label="Default select example">
                            <option value="">计量</option>
                            <option :value="item.sbu" v-for="item in myselfCellPricing.fee">{{transformSbuV(item.sbu)}}</option>
                          </select>
                        </div>
                      </div>
                      <div class="row mb-3">
                        <label  class="col-3 pe-0 pt-0 col-form-label">价值:</label>
                        <div class="col-9 px-0">
                          <span class="help-text fs-6">{{swapHelper.sponsorCellTotal}}</span>
                        </div>
                      </div>
                    </section>
                  </div>
                  <div class="mt-3">
                    <span>服务列表:</span>
                    <ul class="list-group ms-5 mt-3">
                      <li v-for="cell in myselfCells.records" class="list-group-item">
                        <div class="form-check">
                          <input class="form-check-input" @change="onSelectedMyselfCellV" v-model="swap.sponsorCellId" type="radio" name="flexRadioMy" id="cell.id" :value="cell.id">
                          <label class="form-check-label" for="flexRadioMy">
                            {{cell.title}}
                          </label>
                        </div>
                      </li>
                    </ul>
                  </div>
                 
                
                </div>
                <div class="modal-footer btn-light">
                  <button class="btn btn-primary" data-bs-target="#swapServiceModal" data-bs-toggle="modal">返回</button>
                </div>
              </div>
            </div>
          </div>

        </div>
        
      </section>
    </content>
    <footer></footer>
  </mall-app>
  <script  type="module" src="/common/javascripts/tm.js"></script>

  <script  type="module" src="/mall/javascripts/bubble.js"></script>

</body>
</html>