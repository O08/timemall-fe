<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”robots” content=”index,follow”>
    <meta http-equiv ='content-language' content ='zh-cn'>

    <link rel="icon" href="https://www.bluvarri.com/favicon.png">
    <title>委托空间</title>

    <link rel="stylesheet" href="/common/stylesheets/style.scss">
    <link rel="stylesheet" href="/common/stylesheets/millstone-chat-compoent.scss">
  <link rel="stylesheet" href="/micro/arch/stylesheets/commission-ws.scss">


</head>
<body>
    <mall-app id="app" v-cloak>
      <div class="app-container">
        <!-- header nav -->
        <header class="text-white">
          <div class="d-flex justify-content-between align-items-center hdlayout">

            <div class="d-flex align-items-center">
              <div class="toggle-nav">
                <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
                  </svg>
                </button>
              </div>
              <a href="/micro/discovery-oasis">
                <div class="d-flex align-items-center logo">
                  <img src="/common/icon/logo_blv-final-white.png" alt="logo">
                  <h2 class="mb-0 ms-2">部落纪元</h2>
                </div>
              </a>

            </div>
            
            <div>
              
              <div class="btn-group" style="margin-right: 8px;" >
              
                <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false" >
                  <div class="tooltip-nav" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-trigger="hover" data-bs-placement="bottom" data-bs-title="传送">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7623 3.25011C12.2215 3.25576 12.752 3.47285 13.0382 3.98431L13.2124 4.29565C15.8706 9.04584 18.0375 13.9835 19.6863 19.049C19.904 19.7181 19.5451 20.2857 19.097 20.5487C18.6585 20.806 18.0554 20.8404 17.5447 20.512L12.8173 17.4719C12.2948 17.1359 11.5857 17.135 11.0963 17.4441L6.46484 20.3691C5.94281 20.6988 5.33707 20.6351 4.9118 20.3799C4.48468 20.1236 4.10335 19.5712 4.30272 18.8969C5.78977 13.8676 7.79972 8.97844 10.3077 4.28867L10.472 3.98149C10.7563 3.44998 11.3042 3.24448 11.7623 3.25011ZM11.7551 4.76304L11.6305 4.99605C9.22521 9.49368 7.2879 14.1762 5.8404 18.9894L10.2954 16.1759C11.2941 15.5451 12.6321 15.5694 13.6286 16.2102L18.1247 19.1016C16.5242 14.2751 14.4428 9.56596 11.9034 5.02815L11.7551 4.76304Z" fill="white"/>
                      </svg>                  
                  </div>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a href="/">
                      <button class="dropdown-item" type="button">
                        <img class="forward-icon me-2" src="/common/icon/logo_blv-final-black.png" alt="blv-logo"> 主站首页
                      </button>
                    </a>
                  </li>
                  <li>
                    <a href="/micro/discovery-oasis">
                      <button class="dropdown-item" type="button">
                        <img class="forward-icon me-2" src="/common/icon/community.svg" alt="shopping-logo"> 部落纪元
                      </button>
                    </a>
                  </li>
                  <li>
                    <a href="/home">
                      <button class="dropdown-item" type="button">
                        <img class="forward-icon me-2" src="/common/icon/choice-shopping.svg" alt="shopping-logo"> 心选商店
                      </button>
                    </a>
                  </li>
                  <li>
                    <a href="/micro/affiliate/dashboard">
                      <button class="dropdown-item" type="button" >
                        <i class="bi bi-megaphone-fill affiliate-icon me-2"></i> 带货中心
                      </button>
                    </a>
                  </li>
                  
                  <li>
                    <a href="/epod/pod-millstone">
                      <button class="dropdown-item" type="button" >
                        <i class="bi bi-tags me-2"></i> E-Pod
                      </button>
                    </a>
                  </li>

                  <li>
                    <a href="/estudio/studio-store">
                      <button class="dropdown-item" type="button" >
                        <i class="bi bi-laptop me-2"></i> 薪动工作室
                      </button>
                    </a>
                  </li>
                </ul>

              </div>

            

              <div class="btn-group private-msg-atom" style="margin-right: 8px;">
                <button type="button" class="btn entry-nav" data-bs-toggle="dropdown" aria-expanded="false">
                  <div class="tooltip-nav" data-bs-custom-class="custom-tooltip" data-bs-toggle="tooltip" data-bs-placement="bottom" data-bs-trigger="hover" data-bs-title="消息">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M2.80403 8.3533C2.52389 10.9562 2.53637 13.9582 2.9262 16.5505C3.1419 17.9849 4.31257 19.0845 5.75763 19.2102L7.26787 19.3414C10.4169 19.6152 13.5838 19.6152 16.7328 19.3414L18.2431 19.2102C19.6881 19.0845 20.8588 17.9849 21.0745 16.5505C21.4643 13.9582 21.4768 10.9564 21.1967 8.35345C21.1605 8.05169 21.1197 7.75034 21.0745 7.44949C20.8588 6.0151 19.6881 4.91545 18.2431 4.78983L16.7328 4.65855C13.5838 4.38481 10.4169 4.38481 7.26787 4.65855L5.75763 4.78983C4.31257 4.91545 3.1419 6.0151 2.9262 7.44949C2.88096 7.75028 2.84024 8.05159 2.80403 8.3533ZM7.39777 6.15292C10.4604 5.88669 13.5403 5.88669 16.6029 6.15292L18.1131 6.2842C18.8675 6.34977 19.4786 6.92379 19.5912 7.67254C19.6029 7.7503 19.6142 7.82809 19.6253 7.90592L14.0643 10.9954C12.7807 11.7085 11.2199 11.7085 9.93632 10.9954L4.37539 7.90596C4.38645 7.82812 4.39783 7.75031 4.40952 7.67254C4.52211 6.92379 5.13321 6.34977 5.88754 6.2842L7.39777 6.15292ZM19.8088 9.51989C20.0028 11.7876 19.9303 14.0725 19.5912 16.3274C19.4786 17.0762 18.8675 17.6502 18.1132 17.7158L16.6029 17.8471C13.5403 18.1133 10.4604 18.1133 7.39777 17.8471L5.88754 17.7158C5.13321 17.6502 4.52211 17.0762 4.40952 16.3274C4.07043 14.0725 3.99787 11.7877 4.19184 9.51992L9.20786 12.3066C10.9445 13.2714 13.0561 13.2714 14.7928 12.3066L19.8088 9.51989Z" fill="white"/>
                      </svg>  
                  </div>
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <div class="friend-header">
                    私信（{{friends.totalUnRead}}）
                  </div>
                  <div class="friend-list">

                    <li class="friend-item"   v-for="friend in friends.records">
                      <a target="_blank" :href="'/micro/arch/channel-0002?friend='+ friend.id">
                        <div class="friend-container">
                          <div class="frend-avatar-container">
                            <img class="frend-avatar" :src="adaptiveImageUriV(friend.avatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                            <div v-if="friend.brandMark=='3'" class="online-indicator">
                              <div class="online-indicator-content">
                              </div>
                            </div>
                          </div>
                          <div class="friend-info">
                            <div class="friend-name"><span class="ellipsis-1">{{friend.title}}</span> </div>
                            <div class="friend-msg"> <span class="ellipsis-1">{{friend.latestContent}}</span> </div>
                            <div class="msg-time">{{getPublishTimeV(friend.modifiedAt)}}</div>
                          </div>
                        </div>
                      </a>
                    </li>

                  

                  </div>
                  


                </ul>
              </div>

              <div class="btn-group">
                <button type="button" class="btn btn-secondary dropdown-toggle button_user_vue brand-avatar" data-bs-toggle="dropdown" aria-expanded="false">
                  <img  :src="adaptiveImageUriV(getIdentity().avatar)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a href="/estudio/studio-setting-profile">
                      <button class="dropdown-item" type="button">
                        <i class="bi bi-person-vcard me-2"></i> 品牌形象
                      </button>
                    </a>
                  </li>
                  <li>
                      <button @click="logout()" class="dropdown-item" type="button">   
                        <i class="bi bi-box-arrow-right me-2"></i> 退出登录 
                      </button>
                  </li>
                  <li>
                    <a href="/mall/delete-account">
                      <button class="dropdown-item" type="button">
                        <i class="bi bi-trash3 me-2"></i> 删除账号
                      </button>
                    </a>
                  </li>
                  
                  <li>
                    <button class="dropdown-item" type="button" data-bs-toggle="offcanvas" data-bs-target="#feedback_offcanvas_right" aria-controls="feedback_offcanvas_right">
                      <i class="bi bi-flag me-2"></i> 反馈
                    </button>
                  </li>
                </ul>
              </div>
      
              
            </div>


          </div>
        </header>
        <content>
          <main class="content-main">
            <div class="data-tag">快速访问</div>
            <div class="nav-tabs-container">

              <ul class="nav nav-tabs border-0" id="bubble-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <a class="text-decoration-none" :href="'/micro/oasis/commission?oasis_id=' + commissionDetail.oasisId">
                    <button class="nav-link">部落委托</button>
                  </a>
                </li>
                <li class="nav-item" role="presentation">
                  <a class="text-decoration-none" :href="'/micro/oasis/index?oasis_id=' + commissionDetail.oasisId">
                    <button class="nav-link">部落主页</button>
                  </a>
                </li>
                <li class="nav-item" role="presentation">
                  <a class="text-decoration-none" :href="'/micro/arch/channel-0001?oasis_id=' + commissionDetail.oasisId">
                    <button class="nav-link">Fan圈</button>
                  </a>
                </li>
              </ul>

            </div>

            <div class="nav-tabs-container">
              <ul class="nav nav-tabs" id="tob-tablist" role="tablist">
                <li class="nav-item" role="presentation">
                <button class="nav-link active" id="sow-tab" data-bs-toggle="tab" data-bs-target="#sow-tab-pane" type="button" role="tab" aria-controls="sow-tab-pane" aria-selected="true">
                  <i class="bi bi-briefcase"></i>
                  服务内容
                </button>
                </li>
                <li class="nav-item" role="presentation">
                <button class="nav-link" id="event-tab" data-bs-toggle="tab" data-bs-target="#event-tab-pane" type="button" role="tab" aria-controls="event-tab-pane" aria-selected="true">
                  <i class="bi bi-chat-dots"></i>
                  沟通
                </button>
                </li>
                <li class="nav-item" role="presentation">
                <button class="nav-link" id="deliver-tab" data-bs-toggle="tab" data-bs-target="#deliver-tab-pane" type="button" role="tab" aria-controls="deliver-tab-pane" aria-selected="true">
                  <i class="bi bi-box-seam"></i>
                  交付
                </button>
                </li>
              </ul>
            </div>

             <!-- tab content -->
            <div class="tab-content">
              <div class="tab-pane fade" id="event-tab-pane" role="tabpanel" aria-labelledby="event-tab" tabindex="0">
                <div class="room-msg-panel">

                  <div class="room-msg-container">

                    <div v-for="(item,i) in eventObj.records" class="event-date">
                      <a class="btn btn-dark tag-collapse-ctl" data-bs-toggle="collapse" :href="'#block_'+i" role="button" :aria-expanded="eventObj.records.length<3 || i > eventObj.records.length-3">
                        <div class="bi date-tag">{{item.stampDate}}</div>
                      </a>
                      <div class="collapse" 
                      :class="{'show': eventObj.records.length<3 || i > eventObj.records.length-3 }"
                         :id="'block_'+i">
                        <section v-for="record in item.cards" class="event-wrapper new-order">
                          <label>
                            <span class="event-icon new-order">
                              <!-- <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="50" fill="#4CFFA9" fill-opacity="0.7"/>
                                <path d="M59.05 33H64C64.5304 33 65.0391 33.2107 65.4142 33.5858C65.7893 33.9609 66 34.4696 66 35V68C66 68.5304 65.7893 69.0391 65.4142 69.4142C65.0391 69.7893 64.5304 70 64 70H36C35.4696 70 34.9609 69.7893 34.5858 69.4142C34.2107 69.0391 34 68.5304 34 68V35C34 34.4696 34.2107 33.9609 34.5858 33.5858C34.9609 33.2107 35.4696 33 36 33H43V36H57V33H59.05Z" stroke="#FAF7F7" stroke-width="4" stroke-linejoin="round"/>
                                <path d="M53 45L45 53.001H55.004L47 61.001M43 30H57V36H43V30Z" stroke="#FAF7F7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>                           -->
                                <img :src="adaptiveImageUriV(record.authorIcon)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                            </span>
                            <p class="event-header-base border-0">
                              <span class="event-title">{{record.author}}</span>
                              <i class="simple-time ms-2"> {{record.createAt.substr(-8,8)}}</i>
                            </p>
                          </label>
                          <div class="event-msg-content">
                            <p v-if="record.msgType === 'text'" class="text-preline text-message">{{JSON.parse(record.msg).content}}</p>
                            <div  v-if="record.msgType === 'image'">
                              <a target="_blank" :href="'/mall/preview?uri='+JSON.parse(record.msg).uri" rel="noopener noreferrer">
                                <img  :src="JSON.parse(record.msg).uri" class="img-message">
                              </a>
                              <p>
                                <a target="_blank" class="download" download="" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                              </p>
                            </div>
                            <div v-if="record.msgType === 'attachment'">
                              <div class="attachment-message">
                                <span> {{JSON.parse(record.msg).fileName}}</span>
                                <i class="bi bi-file-earmark"></i>
                              </div>
                              <p><a target="_blank" class="download" :download="JSON.parse(record.msg).fileName" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a></p>
                            </div>
                          </div>
                        </section>
                      </div>
                      
                    </div>

                  </div>

                  <div class="chat-input-wrapper">
                    <div class="input-wrapper">
                      <textarea @input="autoHeightV($event)" id="twemoji-picker" class="chat-input" placeholder="Enter your message here"></textarea>
                    </div>
                    <div class="chat-action-wrapper">
                      <div class="chat-action-option">
                        <span>
                          <div class="chat-attachment-btn chat-btn-container">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-paperclip" viewBox="0 0 24 24">
                              <defs></defs>
                              <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
                            </svg>
                            <input @change="handleBigFileChange($event)" id="selection_attachment" type="file" class="input-file">
                          </div>
                        </span>
                        <span>
                          <div id="selection-outer" class="selection-outer ms-2 chat-btn-container">
                            <div id="selection">
                              <button id="selection-emoji" class="empty emoji-btn">
                                <i class="bi bi-emoji-smile"></i>
                              </button>
                            </div>
                          </div>
                        </span>
                        <span>
                          <div class="ms-2 chat-btn-container">
                            <div class="img-btn" >
                              <i class="bi bi-image chat-image-btn"></i>
                              <input @change="handleFileChange($event)" type="file"   id="selection_image" class="input-file">
                            </div>
                          </div>
                        </span>
                      </div>
                      <button v-preventreclick @click="sendTextMessageV" class="chat-send-btn">发送</button>
                    </div>
                  </div>

                  

                  


                </div>

                

                
                

              </div>
            <!-- event tab end -->
            <!-- sow tab begin -->
              <div class="tab-pane fade show active" id="sow-tab-pane" role="tabpanel" aria-labelledby="sow-tab" tabindex="0">

                <div class="commission-info-container pb-5">


                <section class="section-commission-header ps-4 pt-5">
                  <div class="row gx-3 gy-3 row-cols-sm-2 row-cols-1 ">
                      <div class="col">
                          <h3>服务</h3>
                          <p class="ms-2 sow-commission-title">
                           {{commissionDetail.title}}
                          </p>
                      </div>
    
                      <div class="col">
                          <h3>服务商</h3>
                          <div class="d-flex justify-content-start align-items-center mx-2">
                            <div class="brand-portrait">
                              <img class="brand-avator" :src="adaptiveImageUriV(commissionDetail.supplierAvatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                            </div>
                            <h6 class="sow-brand-name mx-2">{{commissionDetail.supplierName}}</h6>
                        </div>
                      </div>
                  </div>
              </section>
              <section class="section-commission-info ps-4">
                  <div class="which-commission d-flex">
                    <div>
                      <h6>摘要:</h6>
                    </div>
                  </div>
                  <div class="commission-content-wrapper ps-4">
                      <div class="commission-content-info">
                        <p class="paragraph">
                          {{commissionDetail.sow}}
                        </p>
                      </div>
                  </div>
                  <div class="price py-3">
                    <i>
                      ￥
                    </i>
                    <ins class="text-decoration-none price-txt">{{commissionDetail.bonus}}</ins>
                  </div>

                  <div class="plan-mark">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M6.66745 7.63686C6.56057 8.77686 6.48557 10.7944 7.1587 11.6531C7.1587 11.6531 6.84182 9.43686 9.68245 6.65623C10.8262 5.53686 11.0906 4.01436 10.6912 2.87248C10.4643 2.22561 10.0499 1.69123 9.68995 1.31811C9.47995 1.09873 9.6412 0.736856 9.94682 0.749981C11.7956 0.832481 14.7918 1.34623 16.0649 4.54123C16.6237 5.94373 16.6649 7.39311 16.3987 8.86686C16.2299 9.80811 15.6299 11.9006 16.9987 12.1575C17.9756 12.3412 18.4481 11.565 18.6599 11.0062C18.7481 10.7737 19.0537 10.7156 19.2187 10.9012C20.8687 12.7781 21.0093 14.9887 20.6681 16.8919C20.0081 20.5706 16.2824 23.2481 12.5812 23.2481C7.95745 23.2481 4.27682 20.6025 3.32245 15.8137C2.93807 13.8806 3.13307 10.0556 6.11432 7.35561C6.33557 7.15311 6.69745 7.33311 6.66745 7.63686Z" fill="url(#paint0_radial_20123_1202)"/>
                      <path d="M14.2705 14.5163C12.5661 12.3225 13.3293 9.8194 13.7474 8.8219C13.8036 8.69065 13.6536 8.5669 13.5355 8.64752C12.8024 9.14627 11.3005 10.32 10.6011 11.9719C9.65426 14.205 9.72176 15.2981 10.2824 16.6331C10.6199 17.4375 10.228 17.6081 10.0311 17.6381C9.83988 17.6681 9.66363 17.5406 9.52301 17.4075C9.11846 17.0191 8.83017 16.5257 8.69051 15.9825C8.66051 15.8663 8.50863 15.8344 8.43926 15.93C7.91426 16.6556 7.64238 17.82 7.62926 18.6431C7.58801 21.1875 9.68988 23.25 12.2324 23.25C15.4368 23.25 17.7711 19.7063 15.9299 16.7438C15.3955 15.8813 14.893 15.3169 14.2705 14.5163Z" fill="url(#paint1_radial_20123_1202)"/>
                      <defs>
                      <radialGradient id="paint0_radial_20123_1202" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(11.6654 23.3064) rotate(-179.751) scale(13.2352 21.7163)">
                      <stop offset="0.314" stop-color="#FF9800"/>
                      <stop offset="0.662" stop-color="#FF6D00"/>
                      <stop offset="0.972" stop-color="#F44336"/>
                      </radialGradient>
                      <radialGradient id="paint1_radial_20123_1202" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(12.4086 10.136) rotate(90.5787) scale(13.8481 10.4217)">
                      <stop offset="0.214" stop-color="#FFF176"/>
                      <stop offset="0.328" stop-color="#FFF27D"/>
                      <stop offset="0.487" stop-color="#FFF48F"/>
                      <stop offset="0.672" stop-color="#FFF7AD"/>
                      <stop offset="0.793" stop-color="#FFF9C4"/>
                      <stop offset="0.822" stop-color="#FFF8BD" stop-opacity="0.804"/>
                      <stop offset="0.863" stop-color="#FFF6AB" stop-opacity="0.529"/>
                      <stop offset="0.91" stop-color="#FFF38D" stop-opacity="0.209"/>
                      <stop offset="0.941" stop-color="#FFF176" stop-opacity="0"/>
                      </radialGradient>
                      </defs>
                      </svg>
                      
                    <span class="ms-2 tag-desc">{{explainOasisCommissionTagV(commissionDetail.tag)}}</span>
                  </div>

              </section>

                </div>

              </div>
            <!-- sow tab end -->
            <!-- deliver tab begin -->
              <div class="tab-pane fade" id="deliver-tab-pane" role="tabpanel" aria-labelledby="deliver-tab" tabindex="0">
                
                <div class="deliver-panel-container">

                  <div v-if="commissionDetail.tag==='2' && mpdc__paperDeliver.role==='supplier' && !taskInConfirmIngV()"  class="deliver-panel-header">
                    <section class="event-wrapper new-order">
                      <div @click="showAddNewDeliverModalV" class="btn-container ms-5">
                        <div class="package-icon new-order">
                          <svg width="32" height="32" viewBox="0 0 32 32" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 6H8V2H6V6H2V8H6V12H8V8H12V6Z" />
                            <path d="M29.919 16.606L26.919 9.606C26.842 9.42608 26.7139 9.27273 26.5505 9.165C26.3871 9.05727 26.1957 8.99989 26 9H23V7C23 6.73478 22.8946 6.48043 22.7071 6.29289C22.5196 6.10536 22.2652 6 22 6H15V8H21V20.556C20.5443 20.8206 20.1456 21.1728 19.8267 21.5922C19.5078 22.0117 19.2751 22.4902 19.142 23H12.858C12.6405 22.1418 12.143 21.3806 11.4442 20.8368C10.7455 20.2931 9.88538 19.9979 9 19.9979C8.11462 19.9979 7.25452 20.2931 6.55578 20.8368C5.85703 21.3806 5.35953 22.1418 5.142 23H4V14H2V24C2 24.2652 2.10536 24.5196 2.29289 24.7071C2.48043 24.8946 2.73478 25 3 25H5.142C5.35953 25.8582 5.85703 26.6194 6.55578 27.1632C7.25452 27.7069 8.11462 28.0021 9 28.0021C9.88538 28.0021 10.7455 27.7069 11.4442 27.1632C12.143 26.6194 12.6405 25.8582 12.858 25H19.142C19.3595 25.8582 19.857 26.6194 20.5558 27.1632C21.2545 27.7069 22.1146 28.0021 23 28.0021C23.8854 28.0021 24.7455 27.7069 25.4442 27.1632C26.143 26.6194 26.6405 25.8582 26.858 25H29C29.2652 25 29.5196 24.8946 29.7071 24.7071C29.8946 24.5196 30 24.2652 30 24V17C30 16.8645 29.9725 16.7305 29.919 16.606ZM9 26C8.60444 26 8.21776 25.8827 7.88886 25.6629C7.55996 25.4432 7.30362 25.1308 7.15224 24.7654C7.00087 24.3999 6.96126 23.9978 7.03843 23.6098C7.1156 23.2219 7.30608 22.8655 7.58579 22.5858C7.86549 22.3061 8.22186 22.1156 8.60982 22.0384C8.99778 21.9613 9.39991 22.0009 9.76537 22.1522C10.1308 22.3036 10.4432 22.56 10.6629 22.8889C10.8827 23.2178 11 23.6044 11 24C10.9992 24.5302 10.7882 25.0384 10.4133 25.4133C10.0384 25.7882 9.53019 25.9992 9 26ZM23 11H25.34L27.484 16H23V11ZM23 26C22.6044 26 22.2178 25.8827 21.8889 25.6629C21.56 25.4432 21.3036 25.1308 21.1522 24.7654C21.0009 24.3999 20.9613 23.9978 21.0384 23.6098C21.1156 23.2219 21.3061 22.8655 21.5858 22.5858C21.8655 22.3061 22.2219 22.1156 22.6098 22.0384C22.9978 21.9613 23.3999 22.0009 23.7654 22.1522C24.1308 22.3036 24.4432 22.56 24.6629 22.8889C24.8827 23.2178 25 23.6044 25 24C24.9995 24.5303 24.7886 25.0387 24.4136 25.4136C24.0387 25.7886 23.5303 25.9995 23 26ZM28 23H26.858C26.6377 22.1434 26.1394 21.3842 25.4412 20.8413C24.743 20.2983 23.8844 20.0025 23 20V18H28V23Z"/>
                          </svg>
                        </div>
                        <span class="paper-head">
                          新交付
                        </span>
                      </div>
                    </section>
                  </div>
                  <div v-show="isEmptyObjectV(mpdc__paperDeliver.records)" class="content-block">
                    <span  v-if="commissionDetail.tag!='3'" >
                      还没有交付记录！
                    </span>
                  </div>
                  <!-- role is supplier start -->
                  <div v-if="mpdc__paperDeliver.role==='supplier'" class="deliver-record-container">
                    <div v-for="record in mpdc__paperDeliver.records" class="deliver-record">
                  
                      <div class="d-flex">
                        <div>
                          交付内容：
                        </div>
                        <div class="record-filename">
                          {{record.deliverName}}
                        </div>
                        <div class="ms-2">
                          <a target="_blank" class="download" :download="record.deliverName" :href="record.deliver"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                        </div>
                      </div>
  
                      <div class="d-flex">
                        
                        <div>
                          预览内容：
                        </div>
                        <div class="record-filename">
                          {{record.previewName}}
                        </div>
                        <div class="ms-2">
                          <a target="_blank" class="download" :download="record.previewName" :href="record.preview"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                        </div>
                   
                      </div>
  
                      <div>
                        <span>交付状态：{{paperDeliverTagExplainV(record.tag)}}</span>
                      </div>
                      <div>
                        <span>提交时间：{{record.createAt}}</span>
                      </div>
  
                      <div class="d-flex">
                        <div class="delivery-remark-heading">留言：</div>
                        <div class="delivery-remark-content">
                          <p class="delivery-remark">
                            {{record.msg}}
                          </p>
                        </div>
                      </div>
  
                    </div>
                  </div>
                <!-- role is supplier end -->
                <!-- role is viewer start -->
                <div v-if="mpdc__paperDeliver.role==='viewer'" class="deliver-record-container">
                  <div v-for="record in mpdc__paperDeliver.records" class="deliver-record">
                    <div v-if="record.tag=='3'" class="d-flex">
                      <div>
                        交付内容：
                      </div>
                      <div class="record-filename">
                        {{record.deliverName}}
                      </div>
                      <div class="ms-2">
                        <a target="_blank" class="download" :download="record.deliverName" :href="record.deliver"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                      </div>
                    </div>
                    <div v-else class="d-flex">
                      
                        <div>
                          预览内容：
                        </div>
                        <div class="record-filename">
                          {{record.previewName}}
                        </div>
                        <div class="ms-2">
                          <a target="_blank" class="download" :download="record.previewName" :href="record.preview"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                        </div>
                   
                    </div>
                    <div>
                      <span>
                        交付状态：
                        {{paperDeliverTagExplainV(record.tag)}}
                      </span>
                    </div>
                    <div>
                      <span>提交时间：{{record.createAt}}</span>
                    </div>
                    
                    <div class="d-flex">
                      <div class="delivery-remark-heading">留言：</div>
                      <div class="delivery-remark-content">
                        <p class="delivery-remark">
                          {{record.msg}}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
  
                <!-- role is viewer end -->
                   
                   
  
                  <!-- role is admin start -->
  
                  <div v-if="mpdc__paperDeliver.role==='admin'" class="deliver-record-container">
                    <div v-for="record in mpdc__paperDeliver.records" class="deliver-record">
                      <div v-if="record.tag=='3'" class="d-flex">
                        <div>
                          交付内容：
                        </div>
                        <div class="record-filename">
                          {{record.deliverName}}
                        </div>
                        <div class="ms-2">
                          <a target="_blank" class="download" :download="record.deliverName" :href="record.deliver"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                        </div>
                      </div>
                      <div v-else class="d-flex">
                        
                          <div>
                            预览内容：
                          </div>
                          <div class="record-filename">
                            {{record.previewName}}
                          </div>
                          <div class="ms-2">
                            <a target="_blank" class="download" :download="record.previewName" :href="record.preview"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                          </div>
                     
                      </div>
                      <div>
                        <span>
                          交付状态：
                          {{paperDeliverTagExplainV(record.tag)}}
                        </span>
                        
                      </div>
                      <div>
                        <span>提交时间：{{record.createAt}}</span>
                      </div>
  
  
  
                       <div v-if="!record.msg && record.tag=='1'" class="leave-msg-container py-4" >
                          <textarea class="form-control" rows="6" v-model="record.newMsg"></textarea>
                          <div class="py-2">
                            <button 
                            :class="{'disabled': !record.newMsg, 
                            'btn-primary': record.newMsg,
                            'btn-secondary': !record.newMsg}"
                             v-preventreclick class="btn" @click="leaveMessageV(record)">留言</button>
                          </div>
                      </div>
                      <div v-else class="d-flex">
                        <div class="delivery-remark-heading">留言：</div>
                        <div class="delivery-remark-content">
                          <p class="delivery-remark">
                            {{record.msg}}
                          </p>
                        </div>
                      </div>
                     
                      <div v-show="record.tag=='1'" class="py-4">
                        <button v-preventreclick @click="revisionPaperDeliverV(record)" class="btn btn-dark">再次修订</button>
                        <button v-preventreclick @click="showAcceptDeliverFocusModalV(record)" class="btn btn-primary ms-5">接受交付</button>
                      </div>
                    </div>
                  </div>
  
                <!-- role is admin end-->

                </div>
                
                
              </div>

            <!-- deliver tab end -->



            </div>

          </main>

        </content>

      </div>
      <section class="modals">

        <!-- focus modal -->
      <div class="modal-container">
        <div class="modal fade" id="focusModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header d-flex justify-content-center border-0 display-dialog-header-bg">
                <h1 class="modal-title fs-5">操作提示</h1>
              </div>
              <div class="modal-body d-flex justify-content-center border-0 display-dialog-body-bg">
                <div class="product-feature">
                  <p class="card-text">{{focusModal.feed}}</p>
                </div>
              </div>
              <div class="modal-footer btn-light d-flex justify-content-between border-0 display-dialog-footer-bg">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button v-preventreclick @click="focusModal.confirmHandler"  type="button"  class="btn btn-primary">确定</button>
              </div>
            </div>
          </div>
        </div>
      </div>

        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="newDeliverModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5">准备交付内容</h1>
                  <button @click="closeDeliverPaperModalHandlerV"  type="button"  class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form onsubmit="return false">
                    <div class="row mb-3">
                      <label class="col-sm-4 col-form-label">
                        预览文件
                        <div class="help-text">
                          上传预览文件，采购商通过该文件判断是否接受您的交付内容。(最大20M)                          </div>
                      </label>
                      <div class="col-sm-8">
                        <input type="file" @change="handlePreviewFileUpload" class="form-control form-control-sm" id="inputPreviewFile">
                      </div>
                    </div>
                    <div class="row mb-3">
                      <label  class="col-sm-4 col-form-label">
                        交付文件
                        <div class="help-text">
                          上传交付文件，最终的交付内容。(最大20M)    
                        </div>
                      </label>
                      <div class="col-sm-8">
                        <input type="file" @change="handleDeliverFileUpload"  class="form-control form-control-sm" id="inputDeliverFile">
                      </div>
                    </div>
                  </form>
               
                </div>
                <div class="modal-footer btn-light">
                  <button
                  :class="{'disabled': delieverOrPreviewFileIsEmpty || deliverFileSizeExceeded || previewFileSizeExceeded , 
                        'btn-primary': !delieverOrPreviewFileIsEmpty && !deliverFileSizeExceeded && !previewFileSizeExceeded,
                        'btn-secondary': delieverOrPreviewFileIsEmpty || deliverFileSizeExceeded || previewFileSizeExceeded}"
                   v-preventreclick @click="deliverPaperV"  type="button" class="btn">交付内容</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="imagePreviewModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5">预览</h1>
                  <button @click="resetFileInput" type="button" id="closeImagePreviewModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex justify-content-center">
                  <div v-if="errors.length == 0" class="image-upload-container">
                    <img id="imagePreview" :src="file.url" >
                  </div>
                  <div v-if="errors.length > 0">
                    <div>文件不符合要求，提示信息：</div>
                    <div v-for="error in errors">
                      <span>{{error}}</span>
                    </div>
                  </div>
                </div>
                <div class="modal-footer btn-light">
                  <button @click="sendImageMessageV"
                  :class="{'disabled': errors.length > 0, 
                        'btn-primary': errors.length == 0,
                        'btn-secondary': errors.length > 0}"
                   v-preventreclick type="button" class="btn btn-primary">选中</button>
                </div>
              </div>
            </div>
          </div>
        </div>
  
        <div class="modal-container">
          <!-- Modal -->
          <div class="modal fade" id="sendBigFileModal" data-bs-backdrop="static" tabindex="-1">
            <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
              <div class="modal-content text-color-dark">
                <div class="modal-header">
                  <h1 class="modal-title fs-5">文件信息</h1>
                  <button @click="resetBigFileInput" type="button" id="closeSendFileModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex justify-content-center">
                  <div v-if="errors.length == 0" class="file-info-container">
                    选中文件: {{bigfile.fileName}}
                  </div>
                  <div v-if="errors.length > 0">
                    <div>文件不符合要求，提示信息：</div>
                    <div v-for="error in errors">
                      <span>{{error}}</span>
                    </div>
                  </div>
                </div>
                <div class="modal-footer btn-light">
                  <button @click="sendAttachmentV"
                  :class="{'disabled': errors.length > 0, 
                        'btn-primary': errors.length == 0,
                        'btn-secondary': errors.length > 0}"
                   v-preventreclick type="button" class="btn btn-primary">发送</button>
                </div>
              </div>
            </div>
          </div>
        </div>
  
      </section>
        
          
    </mall-app>
    <section class="feedback_offcanvas" id="section_feedback_offcanvas">

      <div class="offcanvas offcanvas-end" tabindex="-1" id="feedback_offcanvas_right" aria-labelledby="feedbackOffcanvasRightLabel">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title" id="feedbackOffcanvasRightLabel">发送反馈到Bluvarri</h5>
          <button id="closeFeedbackOffcanvas" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <form id="feedback-form">
            <div class="mt-3">
              <label for="input_issue" class="form-label">您遇到的具体问题是什么(必填,300字以内)</label>
              <textarea  rows="8" type="text" maxlength="300" class="form-control"  id="input_issue"></textarea>
            </div> 
            <div class="mt-3">
              <label class="form-label">附件图片(选填)</label>
              <div class="feedback-attachment-upload-container dropzone-wrapper">
                <img  id="lastestFeedbackAttachment" >
                <div class="dropzone-desc">
                  <i class="bi bi-cloud-plus"></i>
                </div>
                <input type="file" id="input_issue_attachment"  accept="image/jpg, image/png, image/jpeg" class="dropzone">
              </div>
            </div>  
            <div class="mt-3">
              <label for="input_issue_contact" class="form-label">您的联系方式(选填)</label>
              <input id="input_issue_contact"  min="1" max="50000" step="1" type="text" class="form-control" placeholder="请留下邮箱或电话，使我们快速反馈">
            </div> 
            <button type="submit" class="btn btn-primary mt-5 w-100">提交</button>
          </form>
        </div>
      </div>
  
    </section>
    <script type="module" src="/common/javascripts/feedback.js"></script>
    <script type="module" src="/common/javascripts/tm.js"></script>
    <script type="module" src="/micro/arch/javascripts/commission-ws.js"></script>
    <script>
      function goBack() {
          window.history.back()
       }
    </script>


</body>
</html>