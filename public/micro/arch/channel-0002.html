<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=”robots” content=”noindex,nofollow”>
    <meta http-equiv ='content-language' content ='zh-cn'>

    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon">
    <title>私信</title>
    <script src="/common/javascripts/avif-webp.min.js"></script>

    <link rel="stylesheet" href="/common/stylesheets/style.scss">
		<link rel="stylesheet" href="/common/stylesheets/millstone-chat-compoent.scss">
    <link rel="stylesheet" href="/micro/stylesheets/teixcalaanli.scss">
    <link rel="stylesheet" href="/micro/arch/stylesheets/teixcalaanli-arch.scss">
    <link rel="stylesheet" href="/micro/arch/stylesheets/channel-002.scss">
</head>
<body>
  <micro-app class="d-flex flex-row"  id="app">
    <div class="offcanvas-xxl offcanvas-start" tabindex="-1" id="mcSidebar" aria-labelledby="mcSidebarOffcanvasLabel">
      <div class="sidebarContainer d-flex flex-row">
        <col-nav-main>
      <div class="nav-container-wrapper">
        <a href="/micro/teixcalaanli.html" data-bs-custom-class="custom-popover" data-bs-placement="right" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="贤者时间"> 
          <div class="nav-item-default nav-teixcalaanli d-flex align-items-center justify-content-center ms-3">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 13C3.8 13 2 14.8 2 17C2 19.2 3.8 21 6 21C8.2 21 10 19.2 10 17C10 14.8 8.2 13 6 13ZM12 3C9.8 3 8 4.8 8 7C8 9.2 9.8 11 12 11C14.2 11 16 9.2 16 7C16 4.8 14.2 3 12 3ZM18 13C15.8 13 14 14.8 14 17C14 19.2 15.8 21 18 21C20.2 21 22 19.2 22 17C22 14.8 20.2 13 18 13Z" fill="#36F7E5"/>
              </svg>
          </div>
        </a>
        <a href="/micro/arch/channel-0002.html" data-bs-custom-class="custom-popover" data-bs-placement="right" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="私信"> 
          <div class="nav-private-active nav-item-default nav-item-active   d-flex align-items-center justify-content-center mt-5 ms-3">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8.99991 11.9999H14.9999" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              <path d="M9 18H8C4.68629 18 2 15.3137 2 12C2 8.68629 4.68629 6 8 6H9" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              <path d="M15 6H16C19.3137 6 22 8.68629 22 12C22 15.3137 19.3137 18 16 18H15" stroke="#fff" stroke-width="2" stroke-linecap="round"/>
              </svg>              
          </div>
        </a>
        <a href="/home.html" data-bs-custom-class="custom-popover" data-bs-placement="right" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="大巴扎">
          <div class="nav-discovery nav-item-default  nav-plus-13—street  d-flex align-items-center justify-content-center mt-5 ms-3">
         
            <svg width="24" height="24" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            
              <g  data-name="Layer 2">
                <path fill="#659fe2" d="M12.05,11.96l3.48,6.02h0c1.55,2.68-.39,6.02-3.48,6.02h0c-3.09,0-5.02-3.35-3.48-6.02h0s3.48-6.02,3.48-6.02Z"/>
                <path fill="#659fe2" d="M12.05,0c3.09,0,5.02,3.35,3.48,6.02h0s-3.48,6.02-3.48,6.02l-3.48-6.02h0c-1.55-2.68,.39-6.02,3.48-6.02"/>
                <path fill="#659fe2" d="M11.96,12.03l6.06-3.4h0c2.69-1.51,6.02,.46,5.98,3.55h0c-.04,3.09-3.41,4.98-6.06,3.4h0s-5.98-3.55-5.98-3.55Z"/>
                <path fill="#659fe2" d="M0,11.89c.04-3.09,3.41-4.98,6.06-3.4h0s5.98,3.55,5.98,3.55l-6.06,3.4h0C3.29,16.95-.04,14.98,0,11.89"/>
              </g>
            </svg>
               
        </a>

        <a href="/micro/discovery-oasis.html" data-bs-custom-class="custom-popover" data-bs-placement="right" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="探索">
          <div class="nav-discovery nav-item-default  d-flex align-items-center justify-content-center mt-5 ms-3">
         
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.0093 1.875C10.0067 1.875 8.04918 2.46882 6.38413 3.58137C4.71909 4.69392 3.42134 6.27523 2.655 8.12533C1.88866 9.97543 1.68816 12.0112 2.07883 13.9753C2.46951 15.9393 3.43382 17.7435 4.84983 19.1595C6.26583 20.5755 8.06993 21.5398 10.034 21.9305C11.998 22.3211 14.0338 22.1206 15.884 21.3543C17.7341 20.5879 19.3154 19.2902 20.4279 17.6251C21.5405 15.9601 22.1343 14.0025 22.1343 12C22.1318 9.31544 21.0643 6.74155 19.166 4.84329C17.2677 2.94502 14.6938 1.87748 12.0093 1.875ZM12.0093 19.875C10.4518 19.875 8.9292 19.4131 7.63417 18.5478C6.33913 17.6825 5.32977 16.4526 4.73373 15.0136C4.13769 13.5747 3.98174 11.9913 4.2856 10.4637C4.58946 8.93606 5.33948 7.53287 6.44082 6.43153C7.54215 5.3302 8.94534 4.58017 10.4729 4.27632C12.0005 3.97246 13.5839 4.12841 15.0229 4.72445C16.4619 5.32049 17.6918 6.32985 18.5571 7.62488C19.4224 8.91992 19.8843 10.4425 19.8843 12C19.8818 14.0878 19.0513 16.0894 17.575 17.5657C16.0987 19.042 14.0971 19.8725 12.0093 19.875ZM15.2905 7.24688L10.003 9.36563C9.86002 9.42022 9.73015 9.50439 9.62191 9.61263C9.51367 9.72087 9.4295 9.85074 9.37491 9.99375L7.25616 15.2906C7.17432 15.4951 7.15429 15.719 7.19854 15.9348C7.24279 16.1505 7.34938 16.3485 7.5051 16.5042C7.66081 16.6599 7.8588 16.7665 8.07453 16.8107C8.29025 16.855 8.51421 16.835 8.71866 16.7531L14.0155 14.6344C14.1585 14.5798 14.2884 14.4956 14.3967 14.3874C14.5049 14.2791 14.5891 14.1493 14.6437 14.0062L16.753 8.70938C16.8349 8.50493 16.8549 8.28097 16.8106 8.06524C16.7664 7.84952 16.6598 7.65153 16.5041 7.49582C16.3484 7.3401 16.1504 7.23351 15.9347 7.18926C15.7189 7.14501 15.495 7.16504 15.2905 7.24688ZM12.7312 12.7219L10.3124 13.6969L11.2874 11.2781L13.6968 10.3125L12.7312 12.7219Z" fill="#2AC230"/>
            </svg> 
          </div>
        </a>

				

      </div>
      
      <div class="nav-setting">
        <div class="nav-item-default nav-gear d-flex align-items-center justify-content-center ms-3">
          <div class="btn-group">
            <button type="button" class="btn btn-secondary dropdown-toggle button_user_vue" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle"></i>
            </button>
            <ul class="dropdown-menu dropdown-menu-end ms-5">
              <li>
                <a href="/estudio/studio-setting-profile.html">
                  <button class="dropdown-item" type="button">
                    <i class="bi bi-person-vcard me-1"></i> 品牌形象
                   </button>
                </a>
              </li>
              <li>
                  <button onclick="logout()" class="dropdown-item" type="button">   
                    <i class="bi bi-box-arrow-right me-1"></i> 注销 
                  </button>
              </li>
              <li>
                <a href="/mall/delete-account.html">
                  <button class="dropdown-item" type="button">
                    <i class="bi bi-trash3 me-1"></i> 删除账号
                   </button>
                </a>
              </li>
              
              <li>
                <button class="dropdown-item" type="button" data-bs-toggle="offcanvas" data-bs-target="#feedback_offcanvas_right" aria-controls="feedback_offcanvas_right">
                  <i class="bi bi-flag me-1"></i> 反馈
                </button>
              </li>
            </ul>
          </div>

        </div>
      </div>
    </col-nav-main>
    <col-nav-sub>
      <div class="nav-title ms-3 mt-3">
        <h3>私信</h3>
      </div>
      <div class="nav-sub-container mt-3">
        <div>

           <a v-if="beNewFriendV()" class="nav-link p-2 ms-3  d-flex flex-row align-items-center nav-sub-link-active" >
              <button class="position-relative friend-avatar-tiny-container">
                <img class="oasis-avatar-tiny"  :src="adaptiveImageUriV(friendProfile.avatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                <span v-show="false" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                  <span class="visually-hidden">unread messages</span>
                </span>
              </button>
              <div class="link-title ms-2">{{friendProfile.username}}</div>  
           </a>

          <a @contextmenu.prevent="showFriendOptionV($event,friend.id)"
             :href="'/micro/arch/channel-0002.html?friend='+ friend.id" v-for="friend in friends.records" class="nav-link p-2 ms-3  d-flex flex-row align-items-center " 
                    :class="{'nav-sub-link-active': friend.id == currentChatFriendId, 
                    'nva-link-default': friend.id != currentChatFriendId}" >
                    
                    <div class="position-relative friend-avatar-tiny-container">
                      <div class="oasis-avatar-wrapper">
                        <img class="oasis-avatar-tiny"  :src="adaptiveImageUriV(friend.avatar) || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
                      </div>

                      <span v-show="currentChatFriendId!=friend.id && friend.unread!=0" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                        {{ friend.unread > 100 ? "100+" : friend.unread}}
                        <span class="visually-hidden">unread messages</span>
                      </span>
                    </div>
                    <div class="link-title ms-2">{{friend.title}}</div>  
          </a>
 
          
          
        </div>
        
        
      </div>
    </col-nav-sub>
      </div>
    </div>
    
    <col-content>
    <header>
      <div class="d-flex justify-content-between p-3 text-white">
        <div class="d-flex align-items-center logo">
          <a href="#" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.0119 2.1026V2.99675C11.0119 12.754 14.6637 21.1467 20.2322 24.2517V24.835C14.6636 27.9401 11.0118 36.3327 11.0118 46.0901V46.9843H38.4545V46.0901C38.4545 36.2755 34.7408 27.8802 29.1205 24.826V24.2607C34.7404 21.2062 38.4545 12.8108 38.4545 2.99666V2.1026H11.0116H11.0119ZM12.8242 3.89081H36.6423C36.4053 13.1209 32.5518 20.6889 27.8436 22.9267L27.3322 23.1691V25.9206L27.8437 26.1627C32.5516 28.4006 36.4049 35.9664 36.6423 45.1958H12.8242C13.0593 36.0181 16.8557 28.4403 21.5212 26.1568L22.0237 25.9116V23.1751L21.5212 22.9299C16.8559 20.6464 13.0592 13.0686 12.8242 3.89091V3.89081ZM33.2718 12.1332C27.7586 14.7947 21.3542 14.7976 16.2785 12.5251C17.681 17.3969 20.4719 20.8644 23.7554 21.4375C23.6022 21.6398 23.5192 21.8866 23.519 22.1403C23.519 22.7873 24.0443 23.3127 24.6914 23.3127C25.3385 23.3127 25.8638 22.7873 25.8638 22.1403C25.8638 21.88 25.777 21.641 25.6335 21.4465C29.0239 20.8838 31.9009 17.2289 33.2718 12.1333V12.1332ZM24.6914 24.7513C24.0443 24.7513 23.519 25.2765 23.519 25.9237C23.519 26.5708 24.0443 27.096 24.6914 27.096C25.3385 27.096 25.8638 26.5708 25.8638 25.9237C25.8638 25.2765 25.3385 24.7513 24.6914 24.7513ZM24.6914 28.5105C24.0443 28.5105 23.519 29.0359 23.519 29.6829C23.519 30.3301 24.0443 30.8553 24.6914 30.8553C25.3385 30.8553 25.8638 30.3301 25.8638 29.6829C25.8638 29.0359 25.3385 28.5105 24.6914 28.5105ZM24.6914 32.294C24.0443 32.294 23.519 32.8192 23.519 33.4663C23.519 34.1133 24.0443 34.6387 24.6914 34.6387C25.3385 34.6387 25.8638 34.1133 25.8638 33.4663C25.8638 32.8192 25.3385 32.294 24.6914 32.294ZM24.7034 36.1131C22.4821 36.1399 20.2828 38.5794 17.4478 43.3536H32.0904C29.1693 38.4725 26.9246 36.0863 24.7034 36.1131Z" fill="#3887FE"></path>
            </svg>
            <div class="align-middle">
              <h2 class="my-0">咖核</h2>
            </div>
          </a>
        </div>
        <div class="toggle-nav">
          <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#mcSidebar" aria-controls="bdSidebar" aria-label="Toggle mcSidebar navigation">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
            </svg>
          </button>
        </div>
      </div>
    </header>


     <div class="content-wrapper w-100">
      <div v-if="!currentChatFriendId" class="w-100 h-100 d-flex justify-content-center align-items-center">
        <div class="welcome">
          <i class="bi bi-envelope-exclamation"></i>
        </div>
      </div>
      <div @scroll="scrollToTopThenLoadV($event)" v-show="!!currentChatFriendId" class="room-msg-container">
				   
        <div v-for="record in eventObj.records" class="event-date">
          <section class="event-wrapper new-order">
            <label>
              <span class="event-icon new-order">
                <!-- <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="50" cy="50" r="50" fill="#4CFFA9" fill-opacity="0.7"/>
                  <path d="M59.05 33H64C64.5304 33 65.0391 33.2107 65.4142 33.5858C65.7893 33.9609 66 34.4696 66 35V68C66 68.5304 65.7893 69.0391 65.4142 69.4142C65.0391 69.7893 64.5304 70 64 70H36C35.4696 70 34.9609 69.7893 34.5858 69.4142C34.2107 69.0391 34 68.5304 34 68V35C34 34.4696 34.2107 33.9609 34.5858 33.5858C34.9609 33.2107 35.4696 33 36 33H43V36H57V33H59.05Z" stroke="#FAF7F7" stroke-width="4" stroke-linejoin="round"/>
                  <path d="M53 45L45 53.001H55.004L47 61.001M43 30H57V36H43V30Z" stroke="#FAF7F7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>                     -->
                  <img :src="adaptiveImageUriV(record.authorIcon)  || defaultAvatarImage" @error.once="e => { e.target.src = defaultAvatarImage }">
              </span>
              <div class="event-header-base border-0">
                <div class="w-100 d-flex justify-content-between">
                  <span>
                    <span class="event-title">{{record.author}}</span>
                    <i class="simple-time ms-2"> {{record.createAt}}</i>
                  </span>
                  <div class="msg_option me-5">
                    
                    <div  v-show="canRecallMessageV(record.createAt)"  class="btn-group dropstart">
                      <a data-bs-custom-class="custom-popover" data-bs-placement="right" data-bs-trigger="hover" data-bs-toggle="popover" data-bs-content="更多">
                        <button type="button" class="btn  dropdown-toggle msg_option-trigger" data-bs-toggle="dropdown" aria-expanded="false">
                          <i class="bi bi-three-dots"></i>
                        </button>
                        <ul class="dropdown-menu msg_option_container">
                          <li  >
                            <button v-preventreclick    class="btn btn-danger msg_option_recall w-100" @click="recallMessageV(record.id)">
                              <svg class="svg-icon" style="width: 1.06640625em;height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1092 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                                <path d="M731.818667 290.133333a358.4 358.4 0 0 1 14.7456 716.526934l-14.7456 0.273066H204.8v-102.4h527.018667a256 256 0 0 0 13.653333-511.658666l-13.653333-0.341334H68.471467v-102.4h663.3472z" fill="#fff" />
                                <path d="M285.764267 48.3328l72.9088 71.953067-218.9312 221.661866 219.5456 230.263467-74.1376 70.656-253.7472-266.24a51.2 51.2 0 0 1-4.642134-64.989867l5.256534-6.280533L285.764267 48.3328z" fill="#fff" />
                              </svg>
                              <span class="ms-2">撤回消息</span>
                            </button>
                          </li>
                        </ul>
                      </a>
                    </div>

                  </div>
                 
                </div>
                
              </div>
            </label>
            <div class="event-msg-content">
              <p v-if="record.msgType === 'text'" class="text-preline text-message">{{JSON.parse(record.msg).content}}</p>
              <div  v-if="record.msgType === 'image'">
                <a target="_blank" :href="'/mall/preview.html?uri='+JSON.parse(record.msg).uri" rel="noopener noreferrer">
                  <img  :src="JSON.parse(record.msg).uri" class="img-message">
                </a>
                <p>
                  <a target="_blank" class="download" download="" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a>
                </p>
              </div>
              <div v-if="record.msgType === 'attachment'">
                <div class="attachment-message">
                  <span> {{JSON.parse(record.msg).fileName}}</span>
                  <i class="bi bi-file-earmark"></i>
                </div>
                <p><a target="_blank" class="download" :download="JSON.parse(record.msg).fileName" :href="JSON.parse(record.msg).uri"><i class="bi bi-cloud-arrow-down content-download-icon"></i></a></p>
              </div>
            </div>
          </section>
          
        </div>



			</div>
			<div v-show="!!currentChatFriendId" class="chat-input-wrapper">
				<div class="input-wrapper">
					<textarea @input="autoHeightV($event)" id="twemoji-picker" class="chat-input" placeholder="Enter your message here"></textarea>
				</div>
				<div class="chat-action-wrapper">
					<div class="chat-action-option">
						<span>
							<div class="chat-attachment-btn chat-btn-container">
								<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-paperclip" viewBox="0 0 24 24">
									<defs></defs>
									<path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"></path>
								</svg>
								<input @change="handleBigFileChange($event)" id="selection_attachment" type="file" class="input-file">
							</div>
						</span>
						<span>
							<div id="selection-outer" class="selection-outer ms-2 chat-btn-container">
								<div id="selection">
									<button id="selection-emoji" class="empty emoji-btn">
										<i class="bi bi-emoji-smile"></i>
									</button>
								</div>
							</div>
						</span>
						<span>
							<div class="ms-2 chat-btn-container">
								<div class="img-btn" >
									<i class="bi bi-image chat-image-btn"></i>
									<input @change="handleFileChange($event)" type="file"   id="selection_image" class="input-file">
								</div>
							</div>
						</span>
					</div>
					<button v-preventreclick @click="sendTextMessageV" class="chat-send-btn">发送</button>
				</div>
			</div>
      
     </div>


    </col-content>

    <div id="context-menu">
      <div class="item" v-preventreclick @click="deleteAllMsgV">清空好友消息</div>
    </div>

    <section class="modals">

      <div class="modal-container">
        <!-- Modal -->
        <div class="modal fade" id="imagePreviewModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content text-color-dark">
              <div class="modal-header">
                <h1 class="modal-title fs-5">预览</h1>
                <button @click="resetFileInput" type="button" id="closeImagePreviewModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body d-flex justify-content-center">
                <div v-if="errors.length == 0" class="image-upload-container">
                  <img id="imagePreview" :src="file.url" >
                </div>
                <div v-if="errors.length > 0">
                  <div>文件不符合要求，提示信息：</div>
                  <div v-for="error in errors">
                    <span>{{error}}</span>
                  </div>
                </div>
              </div>
              <div class="modal-footer btn-light">
                <button @click="sendImageMessageV"
                :class="{'disabled': errors.length > 0, 
                      'btn-primary': errors.length == 0,
                      'btn-secondary': errors.length > 0}"
                 v-preventreclick type="button" class="btn btn-primary">选中</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-container">
        <!-- Modal -->
        <div class="modal fade" id="sendBigFileModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content text-color-dark">
              <div class="modal-header">
                <h1 class="modal-title fs-5">文件信息</h1>
                <button @click="resetBigFileInput" type="button" id="closeSendFileModal" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body d-flex justify-content-center">
                <div v-if="errors.length == 0" class="file-info-container">
                  选中文件: {{bigfile.fileName}}
                </div>
                <div v-if="errors.length > 0">
                  <div>文件不符合要求，提示信息：</div>
                  <div v-for="error in errors">
                    <span>{{error}}</span>
                  </div>
                </div>
              </div>
              <div class="modal-footer btn-light">
                <button @click="sendAttachmentV"
                :class="{'disabled': errors.length > 0, 
                      'btn-primary': errors.length == 0,
                      'btn-secondary': errors.length > 0}"
                 v-preventreclick type="button" class="btn btn-primary">发送</button>
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>


  </micro-app>
  <section class="feedback_offcanvas" id="section_feedback_offcanvas">

    <div class="offcanvas offcanvas-end" tabindex="-1" id="feedback_offcanvas_right" aria-labelledby="feedbackOffcanvasRightLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="feedbackOffcanvasRightLabel">发送反馈到Bluvarri</h5>
        <button id="closeFeedbackOffcanvas" type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <form id="feedback-form">
          <div class="mt-3">
            <label for="input_issue" class="form-label">您遇到的具体问题是什么(必填,300字以内)</label>
            <textarea  rows="8" type="text" maxlength="300" class="form-control"  id="input_issue"></textarea>
          </div> 
          <div class="mt-3">
            <label class="form-label">附件图片(选填)</label>
            <div class="feedback-attachment-upload-container dropzone-wrapper">
              <img  id="lastestFeedbackAttachment" >
              <div class="dropzone-desc">
                <i class="bi bi-cloud-plus"></i>
              </div>
              <input type="file" id="input_issue_attachment" onchange="previewFeedbackAttachment()" accept="image/jpg, image/png, image/jpeg" class="dropzone">
            </div>
          </div>  
          <div class="mt-3">
            <label for="input_issue_contact" class="form-label">您的联系方式(选填)</label>
            <input id="input_issue_contact"  min="1" max="50000" step="1" type="text" class="form-control" placeholder="请留下邮箱或电话，使我们快速反馈">
          </div> 
          <button type="submit" class="btn btn-primary mt-5 w-100">提交</button>
        </form>
      </div>
    </div>

  </section>
  <script src="/common/javascripts/feedback.js"></script>
  <script type="module" src="/common/javascripts/tm.js"></script>
	<script type="module" src="/micro/arch/javascripts/channel-0002.js"></script>


</body>
</html>