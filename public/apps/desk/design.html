<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex,nofollow">
    <meta http-equiv ='content-language' content ='zh-cn'>

    <link rel="icon" href="https://www.bluvarri.com/favicon.png">
    <title>频道规划</title>
    <script src="/common/javascripts/avif-webp.min.js"></script>

    <link rel="stylesheet" href="/common/stylesheets/style.scss">

    <link rel="stylesheet" href="/apps/desk/stylesheets/admin.scss">
    <link rel="stylesheet" href="/apps/desk/stylesheets/design.scss">


</head>
<body>
  <micro-app id="app" v-cloak>
    <main class="d-flex flex-row">
      <div class="offcanvas-xxl offcanvas-start" tabindex="-1" id="mcSidebar" aria-labelledby="mcSidebarOffcanvasLabel">
        <col-nav-main>
          <nav>
            <div class="oasis-head">
              <img  class="oasis-avatar" src="https://d13-content.oss-cn-hangzhou.aliyuncs.com/common/app/app-desk-logo.svg" >
              <div class="oasis-title">收纳盒设置</div>
            </div>
            <div class="list-group list-group-flush">
              <a :href="'/apps/desk/admin?och='+general.och" class="list-group-item">频道设置</a>
              <a class="list-group-item active">频道规划</a>
            </div>
          </nav>
       </col-nav-main>

      </div>


      <col-content>

        <header>
          <div class="d-flex justify-content-between p-3 text-white">
            <div class="d-flex align-items-center logo">
              <a href="#" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <svg width="49" height="49" viewBox="0 0 49 49" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M11.0119 2.1026V2.99675C11.0119 12.754 14.6637 21.1467 20.2322 24.2517V24.835C14.6636 27.9401 11.0118 36.3327 11.0118 46.0901V46.9843H38.4545V46.0901C38.4545 36.2755 34.7408 27.8802 29.1205 24.826V24.2607C34.7404 21.2062 38.4545 12.8108 38.4545 2.99666V2.1026H11.0116H11.0119ZM12.8242 3.89081H36.6423C36.4053 13.1209 32.5518 20.6889 27.8436 22.9267L27.3322 23.1691V25.9206L27.8437 26.1627C32.5516 28.4006 36.4049 35.9664 36.6423 45.1958H12.8242C13.0593 36.0181 16.8557 28.4403 21.5212 26.1568L22.0237 25.9116V23.1751L21.5212 22.9299C16.8559 20.6464 13.0592 13.0686 12.8242 3.89091V3.89081ZM33.2718 12.1332C27.7586 14.7947 21.3542 14.7976 16.2785 12.5251C17.681 17.3969 20.4719 20.8644 23.7554 21.4375C23.6022 21.6398 23.5192 21.8866 23.519 22.1403C23.519 22.7873 24.0443 23.3127 24.6914 23.3127C25.3385 23.3127 25.8638 22.7873 25.8638 22.1403C25.8638 21.88 25.777 21.641 25.6335 21.4465C29.0239 20.8838 31.9009 17.2289 33.2718 12.1333V12.1332ZM24.6914 24.7513C24.0443 24.7513 23.519 25.2765 23.519 25.9237C23.519 26.5708 24.0443 27.096 24.6914 27.096C25.3385 27.096 25.8638 26.5708 25.8638 25.9237C25.8638 25.2765 25.3385 24.7513 24.6914 24.7513ZM24.6914 28.5105C24.0443 28.5105 23.519 29.0359 23.519 29.6829C23.519 30.3301 24.0443 30.8553 24.6914 30.8553C25.3385 30.8553 25.8638 30.3301 25.8638 29.6829C25.8638 29.0359 25.3385 28.5105 24.6914 28.5105ZM24.6914 32.294C24.0443 32.294 23.519 32.8192 23.519 33.4663C23.519 34.1133 24.0443 34.6387 24.6914 34.6387C25.3385 34.6387 25.8638 34.1133 25.8638 33.4663C25.8638 32.8192 25.3385 32.294 24.6914 32.294ZM24.7034 36.1131C22.4821 36.1399 20.2828 38.5794 17.4478 43.3536H32.0904C29.1693 38.4725 26.9246 36.0863 24.7034 36.1131Z" fill="#3887FE"></path>
                </svg>
                <div class="align-middle">
                  <h2 class="my-0">频道规划</h2>
                </div>
              </a>
            </div>
            <div class="toggle-nav">
              <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#mcSidebar" aria-controls="bdSidebar" aria-label="Toggle mcSidebar navigation">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="app-container">
          <div class="obj-banner-container d-flex align-items-center justify-content-center flex-column">
            <h3>盒纳百川</h3>
            <top-search class="section-top-serach">
              <div class="search">
                <input  @keyup.enter.native="searchAppsV"  v-model="q" type="text" class="form-control Search-Button-Placeholder" placeholder="输入关键词搜索">
                <div class="Search-Icon-Container d-flex align-items-center ms-n5">
                  <svg width="20" height="20" class="Search-Icon" viewBox="0 0 20 20">
                    <path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="#616161" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>  
                </div>
              </div>
            </top-search>
          </div>
          <div class="app-gallery">

            <div v-if="apps.length==0" class="not-found-resource">
              <img src="https://d13-content.oss-cn-hangzhou.aliyuncs.com/common/image/not-found-result.png" alt="bluvarri-service-not-found">
              <h4>未找到结果</h4>
              <p>尝试新搜索或创建新的主题区</p>
              <div class="not-found-cta">  
                 <button @click="showNewTopicModalV"  v-preventreclick  type="button" class="btn btn-save bgPrimaryBlue">
                    <div class="btn-file-upload-wrp">新建主题区</div>
                  </button> 
              </div>
            </div>
    
            <div class="gallery-layout">

           
    
              <div class="app-pannel" v-for="(topic, index)  in apps">
                <div class="app-pannel-head">
                 
                  <div class="app-pannel-head__title">
                    <h3>
                      {{topic.topicTitle}}
                    </h3>
                    <div class="app-pannel-head-dropdown-box">
                      <div class="dropdown">
                        <button type="button" class="btn filter-btn dropdown-toggle border-0" data-bs-toggle="dropdown" aria-expanded="false">
                          <div class="btn-content">

                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM3.37143 10C3.37143 6.33914 6.33914 3.37143 10 3.37143C13.6609 3.37143 16.6286 6.33914 16.6286 10C16.6286 13.6609 13.6609 16.6286 10 16.6286C6.33914 16.6286 3.37143 13.6609 3.37143 10Z" fill="white"/>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M13 10C13 9.78389 12.87 9.6087 12.7097 9.6087H7.29032C7.12998 9.6087 7 9.78389 7 10C7 10.2161 7.12998 10.3913 7.29032 10.3913H12.7097C12.87 10.3913 13 10.2161 13 10Z" fill="white"/>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M13 7.3913C13 7.17519 12.87 7 12.7097 7H7.29032C7.12998 7 7 7.17519 7 7.3913C7 7.60742 7.12998 7.78261 7.29032 7.78261H12.7097C12.87 7.78261 13 7.60742 13 7.3913Z" fill="white"/>
                              <path fill-rule="evenodd" clip-rule="evenodd" d="M13 12.6087C13 12.3926 12.87 12.2174 12.7097 12.2174H7.29032C7.12998 12.2174 7 12.3926 7 12.6087C7 12.8248 7.12998 13 7.29032 13H12.7097C12.87 13 13 12.8248 13 12.6087Z" fill="white"/>
                            </svg>

                          </div>

                          
                         </button>
                        <ul class="dropdown-menu">
                          <li v-preventreclick  @click="showNewAppModalV(topic.topicId)"><a class="dropdown-item">添加资源链</a></li>
                          <li v-preventreclick  @click="showNewTopicModalV"><a class="dropdown-item">新建主题区</a></li>
                          <li v-preventreclick  @click="showEditTopicModalV(topic)"><a class="dropdown-item">编辑主题区</a></li>
                          <li v-if="index>0" v-preventreclick  @click="reorderTopicV(topic.topicId,'up')"><a class="dropdown-item">主题区上移</a></li>
                          <li v-if="(apps.length -1) >index"  v-preventreclick  @click="reorderTopicV(topic.topicId,'down')"><a class="dropdown-item">主题区下移</a></li>
                          <li v-preventreclick  @click="showDeleteFocusModalV(topic.topicId)"><a class="dropdown-item">删除主题区</a></li>
                        </ul>
                      </div>
                    </div>
                    
                  </div>
                  <p>{{topic.topicPreface}}</p>
                </div>
                <div class="app-grid">

                  <div v-for="element in topic.elements" class="app-box-wrp">
                    <div class="app-box">
                      <div class="app-icon-box-wrp">
                        <div class="app-icon-box">
                          <a :href="element.linkUrl" target="_blank">
                            <img :src="adaptiveImageUriV(element.iconUrl)">
                          </a>
                        </div>
                      </div>
                      <div class="app-spacer"></div>
                      <div class="app-info">
                        <div class="app-name">
                          <p>{{element.title}}</p>
                        </div>
                        <div class="app-description">
                          <p>{{element.preface}}</p>
                          <div class="app-ctl">
                            <button v-preventreclick  @click="showEditAppModalV(element)" type="button" class="btn  btn-secondary"><i class="bi bi-pencil-square"></i></button>
                            <button v-preventreclick  @click="delAppV(element.id)" type="button" class="ms-2 btn btn-outline-danger"><i class="bi bi-trash"></i></button>
                        </div>
                        </div>
                      </div>
                    </div>
                  </div>
    

    
                </div>
    
              </div>
  
    
            </div>
    
          </div>
    
        </div>

        
      </col-content>
    </main>

    <section class="modals">
      <!-- focus modal -->
      <div class="modal-container">
        <div class="modal fade" id="focusModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header d-flex justify-content-center border-0 display-dialog-header-bg">
                <h1 class="modal-title fs-5">操作提示</h1>
              </div>
              <div class="modal-body d-flex justify-content-center border-0 display-dialog-body-bg">
                <div class="product-feature">
                  <p class="card-text">{{focusModal.message}}</p>
                </div>
              </div>
              <div class="modal-footer btn-light d-flex justify-content-between border-0 display-dialog-footer-bg">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button v-preventreclick @click="focusModal.confirmHandler"  type="button"  class="btn btn-primary">继续</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- new app modal -->
      <div class="modal-container">
        <div class="modal fade" id="newAppModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content text-color-dark">
              
              <div class="modal-body">
                <form onsubmit="return false">

                <input v-model="newAppObj.title" maxlength="32" class="inputDefault  form-control-lg only-show-bottom mb-3" type="text" placeholder="链接名称">
 
                <input v-model="newAppObj.preface" maxlength="68" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="简介" >


                <input v-model="newAppObj.linkUrl" maxlength="460" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="链接" >


                <div class="oasis-avatar-container">
                  <div class="element_icon_preview_box">
                    <img v-show="btn_ctl.already_choose_icon_file" id="element_icon_preview">
                  </div>
                  <div class="title-col">
                    <div class="help-text label-color">图标建议使用至少 99x99 大小的图片。</div>
                    <button type="button"  class="btn-file-upload"><div class="btn-file-upload-wrp">上传图片<input id="file_icon"  @change="previewElementIconFileV($event)" class="file-input" type="file" tabindex="-1" multiple="" accept=".jpg,.jpeg,.png,.gif" style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; opacity: 0; cursor: pointer; font-size: 0px;"></div>
                    </button>
                  </div>
                </div>
               
                </form>
              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeNewAppModalV" type="button" class="btn-reset">
                  <div class="contents">退出编辑</div>
                </button>

                <button :class="{'btn btn-secondary disabled': !validateNewAppFormV()}" v-preventreclick @click="newAppV" type="button" class="btn-save bgPrimaryBlue">添加</button>

              </div>




            </div>
          </div>
        </div>
      </div>

      <!-- edit app modal -->
      <div class="modal-container">
        <div class="modal fade" id="editAppModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content text-color-dark">
              
              <div class="modal-body">
                <form onsubmit="return false">

                <input @change="btn_ctl.edit_app_modal_change=true" v-model="editAppObj.title" maxlength="32" class="inputDefault  form-control-lg only-show-bottom mb-3" type="text" placeholder="链接名称">
 
                <input @change="btn_ctl.edit_app_modal_change=true" v-model="editAppObj.preface" maxlength="68" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="简介" >

                <input @change="btn_ctl.edit_app_modal_change=true" v-model="editAppObj.linkUrl" maxlength="460" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="链接" >

                </form>
              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeEditAppModalV" type="button" class="btn-reset">
                  <div class="contents">退出编辑</div>
                </button>

                <button :class="{'btn btn-secondary disabled': !validateEditAppFormV()}" v-preventreclick @click="editAppV" type="button" class="btn-save bgPrimaryBlue">保存更改</button>

              </div>




            </div>
          </div>
        </div>
      </div>

      <!-- new topic modal -->
      <div class="modal-container">
        <div class="modal fade" id="newTopicModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content text-color-dark">
              
              <div class="modal-body">
                <form onsubmit="return false">

                <input v-model="newTopicObj.title" maxlength="32" class="inputDefault  form-control-lg only-show-bottom mb-3" type="text" placeholder="主题名称">
 
                <input v-model="newTopicObj.preface" maxlength="38" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="主题简介" >

              
               
                </form>
              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeNewTopicModalV" type="button" class="btn-reset">
                  <div class="contents">退出编辑</div>
                </button>

                <button :class="{'btn btn-secondary disabled': !validateNewTopicFormV()}" v-preventreclick @click="newTopicV" type="button" class="btn-save bgPrimaryBlue">创建</button>

              </div>




            </div>
          </div>
        </div>
      </div>

      <!-- edit topic modal -->
      <div class="modal-container">
        <div class="modal fade" id="editTopicModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content text-color-dark">
              
              <div class="modal-body">
                <form onsubmit="return false">

                <input @change="btn_ctl.edit_topic_modal_change=true" v-model="editTopicObj.title" maxlength="32" class="inputDefault  form-control-lg only-show-bottom mb-3" type="text" placeholder="主题名称">
 
                <input @change="btn_ctl.edit_topic_modal_change=true" v-model="editTopicObj.preface" maxlength="38" class="inputDefault   only-show-bottom preface mb-3" type="text" placeholder="主题简介" >


               
                </form>
              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeEditTopicModalV" type="button" class="btn-reset">
                  <div class="contents">退出编辑</div>
                </button>

                <button :class="{'btn btn-secondary disabled': !validateEditTopicFormV()}" v-preventreclick @click="editTopicV" type="button" class="btn-save bgPrimaryBlue">保存更改</button>

              </div>




            </div>
          </div>
        </div>
      </div>


    </section>
    
  </micro-app>

  <script type="module" src="/common/javascripts/tm.js"></script>
  <script type="module" src="/apps/desk/javascripts/design.js"></script>



</body>
</html>