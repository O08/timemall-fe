<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name=”robots” content=”noindex,nofollow”>
  <meta http-equiv='content-language' content='zh-cn'>

  <link rel="icon" href="https://www.bluvarri.com/favicon.png">
  <title>商品管理 | 兑换中心</title>
  <script src="/common/javascripts/avif-webp.min.js"></script>

  <link rel="stylesheet" href="/common/stylesheets/style.scss">


  <link rel="stylesheet" href="/apps/redeem/stylesheets/admin.scss">


  <link rel="stylesheet" href="/apps/redeem/stylesheets/product.scss">


</head>

<body>
  <micro-app id="app" v-cloak>
    <main class="d-flex flex-row">
      <div class="offcanvas-xxl offcanvas-start" tabindex="-1" id="mcSidebar" aria-labelledby="mcSidebarOffcanvasLabel">
        <col-nav-main>
          <nav>
            <div class="oasis-head">
              <img class="oasis-avatar"
                src="https://d13-content.oss-cn-hangzhou.aliyuncs.com/common/app/app-redeem-logo.svg">
              <div class="oasis-title">{{general.channelName}}</div>
            </div>
            <div class="list-group list-group-flush">
              <a :href="'/apps/redeem/admin?och=' + general.och" class="list-group-item">频道设置</a>
              <a href="#" class="list-group-item  active">商品管理</a>
              <a :href="'/apps/redeem/order?och=' + general.och" class="list-group-item">订单管理</a>
            </div>
          </nav>
        </col-nav-main>

      </div>


      <col-content>
        <header>
          <div class="d-flex justify-content-between p-3 text-white">
            <div class="d-flex align-items-center logo">
              <a href="#" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
                <div class="align-middle">
                  <h2 class="my-0">商品管理</h2>
                </div>
              </a>
            </div>
            <div class="toggle-nav">
              <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#mcSidebar"
                aria-controls="bdSidebar" aria-label="Toggle mcSidebar navigation">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi" fill="currentColor"
                  viewBox="0 0 16 16">
                  <path fill-rule="evenodd"
                    d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z">
                  </path>
                </svg>
              </button>
            </div>
          </div>
        </header>

        <div class="content-container">

          <div class="content-core-box">


            <div class="feature-title">
              商品列表
            </div>

            <div class="product-filter">
              <div class="search-widget">
                <div id="nav-searchform">
                  <div class="nav-search-btn">
                    <i class="bi bi-search"></i>
                  </div>
                  <div class="nav-search-content">
                    <input v-model="productList_pagination.param.q" @keyup.enter.native="searchProductListV"
                      class="nav-search-input" type="text" autocomplete="off" maxlength="100" placeholder="搜索">
                  </div>
                </div>

                <select v-model="productList_pagination.param.status" @change="filterProductListV"
                  class="form-select custom-select">
                  <option value="">全部状态</option>
                  <option value="1">{{explainProductStausV('1')}}</option>
                  <option value="2">{{explainProductStausV('2')}}</option>
                  <option value="3">{{explainProductStausV('3')}}</option>
                </select>

                <select v-model="productList_pagination.param.genreId" class="form-select custom-select"
                  @change="filterProductListV">
                  <option value="">全部品类</option>
                  <option v-for="item in genres" :value="item.genreId">{{item.genreName}}</option>
                </select>

              </div>


              <div class="right-pannel">


                <div class="dropdown">
                  <button class="btn-save dropdown-toggle" type="button" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    <div class="btn-content d-flex align-items-center justify-content-center">
                      操作
                    </div>

                  </button>
                  <ul class="dropdown-menu">
                    <li v-preventreclick @click="showAddProductGenreModalV"><a class="dropdown-item" href="#">添加品类</a>
                    </li>
                    <li v-preventreclick @click="showProductGenreManagementModalV"><a class="dropdown-item"
                        href="#">品类管理</a></li>
                    <li v-preventreclick @click="showNewProductModalV"><a class="dropdown-item" href="#">添加商品</a></li>
                  </ul>
                </div>

              </div>


            </div>

            <div class="products-box mt-4">


              <div class="table-responsive">
                <div class="table-wrp">
                  <table class="table table-sm table-dark table-hover align-middle">
                    <thead>
                      <tr>
                        <th class="col-option"></th>
                        <th class="col-product-name">商品</th>
                        <th class="col-product-code">商品编码</th>
                        <th class="col-fee">售价</th>
                        <th class="col-inventory">已兑换/库存</th>
                        <th class="col-fee">限购</th>
                        <th class="col-genre">品类</th>
                        <th class="col-shipping">发货方式</th>
                        <th class="col-status">状态</th>
                        <th class="col-addTime">创建时间</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="product in productList_pagination.records">
                        <td>
                          <span v-preventreclick @click="showEditProductModalV(product.productId)"
                            class="btn-option-secondary" data-bs-custom-class="custom-popover"
                            data-bs-placement="bottom" data-bs-trigger="hover" data-bs-toggle="popover"
                            data-bs-content="编辑">
                            <i class="bi bi-pencil-square"></i>
                          </span>
                          <span v-preventreclick @click="deleteProductV(product.productId)" class="option-edit ms-2">
                            <button role="button" :disabled="product.status=='2'"
                             :class="{'option-disabled': product.status=='2'}"
                              class="btn-option-secondary"
                              data-bs-custom-class="custom-popover" data-bs-placement="bottom" data-bs-trigger="hover"
                              data-bs-toggle="popover" data-bs-content="删除">
                              <i class="bi bi-trash3"></i>
                            </button>
                          </span>
                          <span v-if="product.status=='3' || product.status=='1' " v-preventreclick
                            @click="onlineProductV(product.productId)" class="btn-option-secondary ms-2"
                            data-bs-custom-class="custom-popover" data-bs-placement="bottom" data-bs-trigger="hover"
                            data-bs-toggle="popover" data-bs-content="上架">
                            <i class="bi bi-caret-up-fill"></i>
                          </span>
                          <span v-if="product.status=='2'" v-preventreclick @click="offlineProductV(product.productId)"
                            class="btn-option-secondary ms-2" data-bs-custom-class="custom-popover"
                            data-bs-placement="bottom" data-bs-trigger="hover" data-bs-toggle="popover"
                            data-bs-content="下架">
                            <i class="bi bi-caret-down-fill"></i>
                          </span>
                        </td>

                        <td>
                          <div class="tb-product-info">
                            <img :src="adaptiveImageUriV(product.thumbnail)" class="product-thumbnail">
                            <div class="productInfo__name">
                              {{product.productName}}
                            </div>
                          </div>
                        </td>
                        <td>
                          <span style="word-break: break-all;">
                            {{product.productCode}}
                          </span>
                        </td>
                        <td>
                          {{product.price}}
                        </td>
                        <td>
                          {{product.soldOrders}}/{{product.inventory}}
                        </td>
                        <td>
                          {{product.salesQuota}}
                        </td>
                        <td>
                          <span style="word-break: break-all;">
                            {{product.genreName}}
                          </span>
                        </td>
                        <td>
                          {{explainAppRedeemShippingTypeV(product.shippingType)}}
                        </td>
                        <td>
                          {{explainProductStausV(product.status)}}
                        </td>
                        <td>{{product.createAt.replace(new RegExp('-', 'g'), '/')}}</td>
                      </tr>
                    </tbody>
                  </table>
                  <nav v-if="!!productList_pagination.paging" aria-label="Page navigation" class="millstone-pagination">
                    <ul class="pagination pagination-lg pagination-dark  border-0">
                      <li class="page-item" v-preventreclick @click="pagePre(productList_pagination)">
                        <a class="page-link" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                      </li>
                      <li class="page-item" v-for="page in productList_pagination.paging.items"
                        :class="{'current-page-active': productList_pagination.paging.current == page}" v-preventreclick
                        @click="pageGo(productList_pagination,page)"><a class="page-link">{{page}}</a></li>
                      <li class="page-item" v-preventreclick @click="pageNext(productList_pagination)">
                        <a class="page-link" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                        </a>
                      </li>
                    </ul>
                  </nav>
                  <div v-if="productList_pagination.records.length==0" class="not-found-resource"><img
                      src="https://d13-content.oss-cn-hangzhou.aliyuncs.com/common/image/not-found-result.png"
                      alt="bluvarri-service-not-found">
                    <h4>未找到结果</h4>
                  </div>
                </div>
              </div>

            </div>



          </div>


        </div>

      </col-content>
    </main>
    <section class="modals">
      <!-- new product Modal start -->
      <div class="modal-container">
        <div class="modal define-product-modal" id="newProductModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-body">

                <form class="row g-3" onsubmit="return false">
                  <div class="section-name">商品信息</div>

                  <div class="col-12">
                    <label for="newProduct__productName" class="form-label">商品名称</label>
                    <input tabindex="-1" id="newProduct__productName" v-model="newProduct.productName" maxlength="72"
                      class="form-control  only-show-bottom mb-3" type="text" placeholder="比如，Bilibili 大会员">
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__productCode" class="form-label">商品编码</label>
                    <input tabindex="-1" @input="transformInputTextV($event)"  id="newProduct__productCode" v-model="newProduct.productCode" maxlength="32"
                      class="form-control  only-show-bottom mb-3" type="text" placeholder="比如，Bili_dahuiyuan">
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__productGenre" class="form-label">品类</label>
                    <model-select tabindex="-1" id="newProduct__productGenre" class="mb-3" :options="genreOptions" placeholder=""
                      v-model="genreSelectedItem">
                    </model-select>
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__productPrice" class="form-label">售价</label>
                    <input tabindex="-1" id="newProduct__productPrice" v-model="newProduct.price"
                      @input="transformInputNumberAsPositiveDecimalV($event)" max="5000000" type="text"
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__productInventory" class="form-label">库存</label>
                    <input id="newProduct__productInventory" v-model="newProduct.inventory"
                      @input="transformInputNumberAsPositiveV($event)" min="1" max="100000" type="text"
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__releaseAt" class="form-label">开售日期</label>
                    <input  id="newProduct__releaseAt"  data-olddate="" v-model="newProduct.releaseAt"  @input="userInputDatePickerHandlerV($event)"
                       type="text"
                      class="form-control  only-show-bottom mb-3 datepicker" placeholder="" autocomplete="off">
                  </div>

                  <div class="col-md-6">
                    <label for="newProduct__estimatedDeliveryAt" class="form-label">首批发货时间</label>
                    <input id="newProduct__estimatedDeliveryAt"  data-olddate="" v-model="newProduct.estimatedDeliveryAt"  @input="userInputDatePickerHandlerV($event)"
                       type="text"
                      class="form-control  only-show-bottom mb-3 datepicker" placeholder="" autocomplete="off">
                  </div>
                  
        
                 

                

                  <div class="col-12 h-100">
                    <label for="newProduct__shippingTerm" class="form-label">权益须知</label>
                    <div tabindex="-1" id="editorForNew">

                    </div>

                  </div>




                  <div class="col-12">
                    <div class="horizontal-line"></div>
                  </div>


                  <div class="section-name">履约信息</div>

                  

                  <div class="col-md-6">
                    <label for="newProduct__salesQuotaType" class="form-label">限购策略</label>
                    <select id="newProduct__salesQuotaType" v-model="newProduct.salesQuotaType"
                      class="form-select only-show-bottom mb-3 ">
                      <option value="per_person">每人限购</option>
                      <option value="month_limit">每月限购</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="newProduct__salesQuota" class="form-label">限购数量</label>
                    <input tabindex="0" id="newProduct__salesQuota" v-model="newProduct.salesQuota"
                      @input="transformInputNumberAsPositiveV($event)" min="1" max="100" type="text" placeholder=""
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                  

                  <div class="col-12  only-show-bottom mb-3 ">
                    <div class="form-check form-check-inline">
                      <input v-model="newProduct.shippingType" class="form-check-input" type="radio"
                        name="newProductShippingType" id="newProduct__shippingTypeEmail" value="email">
                      <label class="form-check-label" for="newProduct__shippingTypeEmail">邮箱发货</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input v-model="newProduct.shippingType" class="form-check-input" type="radio"
                        name="newProductShippingType" id="newProduct__shippingTypeLogistics" value="logistics">
                      <label class="form-check-label" for="newProduct__shippingTypeLogistics">物流发货</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input v-model="newProduct.shippingType" class="form-check-input" type="radio"
                        name="newProductShippingType" id="newProduct__shippingTypeOther" value="others">
                      <label class="form-check-label" for="newProduct__shippingTypeOther">其他方式</label>
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="newProduct__warmReminder" class="form-label">温馨提示</label>
                    <textarea id="newProduct__warmReminder" v-model="newProduct.warmReminder"
                      placeholder="特别提示，比如告知买家及时填写收货人、收货邮箱、收货地址信息；虚拟商品权益下发后不支持退货、换货、兑现；权益调整告知等" rows="8" maxlength="300"
                      class="form-control  only-show-bottom"></textarea>
                  </div>

                  <div class="col-12">
                    <div class="horizontal-line"></div>
                  </div>

                  <div class="oasis-avatar-container">
                    <div id="link-cover-preview-box" class="link-cover-box">
                      <img v-show="!!newProduct.productThumbnailFileUrl" :src="newProduct.productThumbnailFileUrl">
                    </div>
                    <div class="title-col">
                      <div class="help-text">主图建议使用至少 99x99 大小的图片。</div>
                      <button type="button" class="btn-file-upload">
                        <div class="btn-file-upload-wrp">上传主图<input id="file_thumbnail"
                            @change="previewNewProductThumbnailV" class="file-input" type="file" tabindex="-1"
                            multiple="" accept=".jpg,.jpeg,.png,.gif"
                            style="opacity: 0; cursor: pointer; width: 100%; height: 100%; font-size: 0px; position: absolute; top: 0px; left: 0px;">
                        </div>
                      </button>
                    </div>
                  </div>


                </form>

              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeNewProductModalV" type="button"
                  class="btn btn-outline-secondary fresh-ui-btn">
                  <div class="contents">取消</div>
                </button>

                <button :class="{'disabled': !validateNewProductFormV()}" v-preventreclick @click="createProductV"
                  type="button" class="btn btn-primary fresh-ui-btn">添加</button>

              </div>



            </div>
          </div>
        </div>
      </div>
      <!-- new product Modal end -->

      <!-- edit product Modal start -->
      <div class="modal-container">
        <div class="modal define-product-modal fade" id="editProductModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-body">
                <form class="row g-3" onsubmit="return false">
                  <div class="section-name">商品信息</div>

                  <div class="col-12">
                    <label for="editProduct__productName" class="form-label">商品名称</label>
                    <input id="editProduct__productName" v-model="editProduct.productName" maxlength="72"
                      class="form-control  only-show-bottom mb-3" type="text" placeholder="比如，Bilibili 大会员">
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__productCode" class="form-label">商品编码</label>
                    <input id="editProduct__productCode"  @input="transformInputTextV($event)"  v-model="editProduct.productCode" maxlength="32"
                      class="form-control  only-show-bottom mb-3" type="text" placeholder="比如，Bili_dahuiyuan">
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__productGenre" class="form-label">品类</label>
                    <model-select id="editProduct__productGenre" class="mb-3" :options="genreOptions" placeholder=""
                      v-model="genreSelectedItem">
                    </model-select>
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__productPrice" class="form-label">售价</label>
                    <input id="editProduct__productPrice" v-model="editProduct.price"
                      @input="transformInputNumberAsPositiveDecimalV($event)" max="5000000" type="text"
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__productInventory" class="form-label">库存</label>
                    <input id="editProduct__productInventory" v-model="editProduct.inventory"
                      @input="transformInputNumberAsPositiveV($event)" min="1" max="100000" type="text"
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__releaseAt" class="form-label">开售日期</label>
                    <input id="editProduct__releaseAt" v-model="editProduct.releaseAt" data-olddate=""
                      @input="userInputDatePickerHandlerV($event)" type="text"
                      class="form-control  only-show-bottom mb-3 datepicker" placeholder="" autocomplete="off">
                  </div>

                  <div class="col-md-6">
                    <label for="editProduct__estimatedDeliveryAt" class="form-label">首批发货时间</label>
                    <input id="editProduct__estimatedDeliveryAt" v-model="editProduct.estimatedDeliveryAt"
                      data-olddate="" @input="userInputDatePickerHandlerV($event)" type="text"
                      class="form-control  only-show-bottom mb-3 datepicker" placeholder="" autocomplete="off">
                  </div>

                  <div class="col-12 h-100">
                    <label for="editProduct__shippingTerm" class="form-label">权益须知</label>
                    <div id="editorForChange">

                    </div>
                  </div>
                  <div class="col-12">
                    <div class="horizontal-line"></div>
                  </div>



                  <div class="section-name">履约信息</div>

                  <div class="col-md-6">
                    <label for="editProduct__salesQuotaType" class="form-label">限购策略</label>
                    <select id="editProduct__salesQuotaType" v-model="editProduct.salesQuotaType"
                      class="form-select only-show-bottom mb-3 ">
                      <option value="per_person">每人限购</option>
                      <option value="month_limit">每月限购</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="editProduct__salesQuota" class="form-label">限购数量</label>
                    <input id="editProduct__salesQuota" v-model="editProduct.salesQuota"
                      @input="transformInputNumberAsPositiveV($event)" min="1" max="100" type="text" placeholder=""
                      class="form-control  only-show-bottom  mb-3">
                  </div>

                 

                  <div class="col-12  only-show-bottom mb-3 ">
                    <div class="form-check form-check-inline">
                      <input v-model="editProduct.shippingType" class="form-check-input" type="radio"
                        name="eidtProductShippingType" id="editProduct__shippingTypeEmail" value="email">
                      <label class="form-check-label" for="editProduct__shippingTypeEmail">邮箱发货</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input v-model="editProduct.shippingType" class="form-check-input" type="radio"
                        name="eidtProductShippingType" id="editProduct__shippingTypeLogistics" value="logistics">
                      <label class="form-check-label" for="editProduct__shippingTypeLogistics">物流发货</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input v-model="editProduct.shippingType" class="form-check-input" type="radio"
                        name="eidtProductShippingType" id="editProduct__shippingTypeOther" value="others">
                      <label class="form-check-label" for="editProduct__shippingTypeOther">其他方式</label>
                    </div>
                  </div>

                  <div class="col-12">
                    <label for="editProduct__warmReminder" class="form-label">温馨提示</label>
                    <textarea id="editProduct__warmReminder" v-model="editProduct.warmReminder"
                      placeholder="特别提示，比如告知买家及时填写收货人、收货邮箱、收货地址信息；虚拟商品权益下发后不支持退货、换货、兑现；权益调整告知等" rows="8" maxlength="300"
                      class="form-control  only-show-bottom"></textarea>
                  </div>

                  <div class="col-12">
                    <div class="horizontal-line"></div>
                  </div>


                  <div class="oasis-avatar-container">
                    <div id="link-cover-preview-box" class="link-cover-box">
                      <img v-show="!!editProduct.productThumbnailFileUrl"
                        :src="adaptiveImageUriV(editProduct.productThumbnailFileUrl)">
                    </div>
                    <div class="title-col">
                      <div class="help-text">主图建议使用至少 99x99 大小的图片。</div>
                      <!-- <button :class="{'disabled': !btn_ctl.open_material_upload,'loading': btn_ctl.material_uploading}"  class="btn btn-file-upload bgPrimary">
                
                        <div class="btn-file-upload-wrp">上传 <input @change="uploadProposalMaterialV($event,'seller')" class="file-input" type="file"  style="opacity: 0; cursor: pointer; width: 100%; height: 100%; font-size: 0px; position: absolute; top: 0px; left: 0px;"></div>
                        <div class="loading-content">
                          <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                          <span role="status">正在上传...</span>
                        </div>
        
                      </button> -->

                      <button :class="{'loading': btn_ctl.material_uploading}" type="button" class="btn-file-upload">
                        <div class="btn-file-upload-wrp">替换主图 <input id="edit_file_thumbnail" @change="previewEditProductThumbnailV" tabindex="-1" class="file-input" type="file"  multiple="" accept=".jpg,.jpeg,.png,.gif" style="opacity: 0; cursor: pointer; width: 100%; height: 100%; font-size: 0px; position: absolute; top: 0px; left: 0px;"></div>
                        <div class="loading-content">
                          <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                          <span role="status">正在上传...</span>
                        </div>
                      </button>
                    </div>
                  </div>

                </form>

              </div>

              <div class="modal-footer">

                <button v-preventreclick @click="closeEditProductModalV" type="button"
                  class="btn btn-outline-secondary fresh-ui-btn">
                  <div class="contents">取消</div>
                </button>

                <button :class="{'disabled': !validateEditProductFormCanSaveV()}" v-preventreclick @click="editProductV"
                  type="button" class="btn btn-primary fresh-ui-btn">提交</button>

              </div>



            </div>
          </div>
        </div>
      </div>
      <!-- edit product Modal end -->

      <!-- genre modal start -->
      <div class="modal-container">

        <div class="modal fresh-ui fade" id="addProductGenreModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content text-color-dark">
              <div class="modal-header">
                <h1 class="modal-title">添加品类</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>

                  <div class="row mb-3 mt-3">
                    <div class="col-sm-12">
                      <input id="input[genreName]" v-model="newGenre.genreName" type="text" maxlength="20"
                        class="form-control" placeholder="输入品类" autocomplete="off">
                    </div>
                  </div>
                </form>

              </div>
              <div class="modal-footer btn-light">
                <button v-preventreclick @click="closeCreateGenreModalV" type="button"
                  class="btn btn-outline-secondary fresh-ui-btn">取消</button>
                <button :class="{'disabled': !newGenre.genreName}" v-preventreclick @click="createGenreV" type="button"
                  class="btn btn-primary fresh-ui-btn">提交</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- genre modal end -->
      <!-- genre management Modal -->
      <div class="modal-container">

        <div class="modal fresh-ui fade" id="generMangementModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content text-color-dark" style="height: 460px;">
              <div class="modal-header">
                <h1 class="modal-title">品类管理</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div v-if="genres.length==0">
                  <div style="font-size: 14px;">未找到相关结果，商家可点击「操作」-「添加品类」进行创建</div>
                </div>
                <ul class="list-group list-group-flush">
                  <li v-for="(genre, index)  in genres" class="list-group-item" style="font-size: 13px;">
                    <div class="genre-item">
                      <span>{{genre.genreName}}</span>
                      <span class="more-option-menu">
                        <span v-preventreclick @click="showEditProductGenreModalV(genre)"
                          class="btn-option-outline-secondary" data-bs-custom-class="custom-popover"
                          data-bs-placement="top" data-bs-trigger="hover" data-bs-toggle="popover"
                          data-bs-content="重命名品类">
                          <i class="bi bi-pencil-square"></i>
                        </span>


                        <span class="option-edit ms-2" class="btn-option-secondary">
                          <div class="dropdown">
                            <a class="btn-option-outline-secondary dropdown-toggle" role="button"
                              data-bs-toggle="dropdown" aria-expanded="false">
                              <i class="bi bi-three-dots"></i>
                            </a>

                            <ul class="dropdown-menu">
                              <li v-if="index>0"><a class="dropdown-item" v-preventreclick
                                  @click="changeGenreSortV(genre.genreId,'up')">上移</a></li>
                              <li v-if="(genres.length -1) >index"><a class="dropdown-item" v-preventreclick
                                  @click="changeGenreSortV(genre.genreId,'down')">下移</a></li>
                              <li><a class="dropdown-item" v-preventreclick @click="delGenreV(genre.genreId)">删除</a>
                              </li>
                            </ul>
                          </div>
                        </span>
                      </span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- genre edit modal start -->
      <div class="modal-container">

        <div class="modal fresh-ui  fade" id="editProductGenreModal" data-bs-backdrop="static" tabindex="-1">
          <div class="modal-dialog  modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content text-color-dark">
              <div class="modal-header">
                <h1 class="modal-title">重命名品类</h1>
                <button v-preventreclick @click="closeEditGenreModalV" type="button" class="btn-close"
                  data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="row mb-3 mt-3">
                    <div class="col-sm-12">
                      <input @change="btn_ctl.editGenreModal_already_change=true" id="input[editGenreName]"
                        v-model="editGenre.genreName" type="text" maxlength="20" class="form-control" placeholder="输入品类"
                        autocomplete="off">
                    </div>
                  </div>


                </form>

              </div>
              <div class="modal-footer btn-light">
                <button v-preventreclick @click="closeEditGenreModalV" type="button"
                  class="btn btn-outline-secondary fresh-ui-btn">取消</button>
                <button :class="{'disabled': !editGenre.genreName || !btn_ctl.editGenreModal_already_change}"
                  v-preventreclick @click="changeGenreNameV" type="button"
                  class="btn btn-primary fresh-ui-btn">提交</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- genre edit modal end -->


    </section>

  </micro-app>

  <script type="module" src="/common/javascripts/tm.js"></script>
  <script type="module" src="/apps/redeem/javascripts/product.js"></script>



</body>

</html>